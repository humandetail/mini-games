var wr=Object.defineProperty;var Ar=(t,i,a)=>i in t?wr(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a;var Le=(t,i,a)=>(Ar(t,typeof i!="symbol"?i+"":i,a),a);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function a(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=a(s);fetch(s.href,h)}})();const D=20;var A=(t=>(t[t.up=0]="up",t[t.right=1]="right",t[t.down=2]="down",t[t.left=3]="left",t))(A||{}),E=(t=>(t.top="top",t.right="right",t.bottom="bottom",t.left="left",t))(E||{}),O=(t=>(t[t.finished=0]="finished",t[t.playing=1]="playing",t[t.paused=2]="paused",t))(O||{});const Rt=(t,i)=>Math.round(Math.random()*(i-t))+t,at=(t=400,i=300,a)=>{var h;const o=a!=null?a:document.createElement("canvas");o.style.width=`${t}px`,o.style.height=`${i}px`;const s=(h=window.devicePixelRatio)!=null?h:1;return o.width=Math.floor(s*t),o.height=Math.floor(s*i),o.getContext("2d").scale(s,s),o},Fe=({x:t,y:i},{x:a,y:o})=>{if(t===a){if(i-o===1)return E.bottom;if(i-o===-1)return E.top;if(i-o<-1)return E.bottom;if(i-o>1)return E.top}if(i===o){if(t-a===1)return E.right;if(t-a===-1)return E.left;if(t-a<-1)return E.right;if(t-a>1)return E.left}return E.right},ne=(t,i,a,o)=>t===E.top&&i===E.bottom?null:t===E.top&&i===E.right?{x:a.x,y:o.y}:t===E.top&&i===E.left?{x:a.x,y:o.y}:t===E.bottom&&i===E.top?null:t===E.bottom&&i===E.right?{x:a.x,y:o.y}:t===E.bottom&&i===E.left?{x:a.x,y:o.y}:t===E.left&&i===E.top?{x:o.x,y:a.y}:t===E.left&&i===E.right?null:t===E.left&&i===E.bottom?{x:o.x,y:a.y}:t===E.right&&i===E.top?{x:o.x,y:a.y}:t===E.right&&i===E.bottom?{x:o.x,y:a.y}:(t===E.right&&i===E.left,null);var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ft={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(i,a,o,s){var h=["","webkit","Moz","MS","ms","o"],p=a.createElement("div"),d="function",v=Math.round,m=Math.abs,N=Date.now;function I(e,r,n){return setTimeout(he(e,n),r)}function C(e,r,n){return Array.isArray(e)?(_(e,n[r],n),!0):!1}function _(e,r,n){var l;if(!!e)if(e.forEach)e.forEach(r,n);else if(e.length!==s)for(l=0;l<e.length;)r.call(n,e[l],l,e),l++;else for(l in e)e.hasOwnProperty(l)&&r.call(n,e[l],l,e)}function g(e,r,n){var l="DEPRECATED METHOD: "+r+`
`+n+` AT 
`;return function(){var u=new Error("get-stack-trace"),f=u&&u.stack?u.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",M=i.console&&(i.console.warn||i.console.log);return M&&M.call(i.console,l,f),e.apply(this,arguments)}}var c;typeof Object.assign!="function"?c=function(r){if(r===s||r===null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(r),l=1;l<arguments.length;l++){var u=arguments[l];if(u!==s&&u!==null)for(var f in u)u.hasOwnProperty(f)&&(n[f]=u[f])}return n}:c=Object.assign;var R=g(function(r,n,l){for(var u=Object.keys(n),f=0;f<u.length;)(!l||l&&r[u[f]]===s)&&(r[u[f]]=n[u[f]]),f++;return r},"extend","Use `assign`."),w=g(function(r,n){return R(r,n,!0)},"merge","Use `assign`.");function F(e,r,n){var l=r.prototype,u;u=e.prototype=Object.create(l),u.constructor=e,u._super=l,n&&c(u,n)}function he(e,r){return function(){return e.apply(r,arguments)}}function ue(e,r){return typeof e==d?e.apply(r&&r[0]||s,r):e}function S(e,r){return e===s?r:e}function b(e,r,n){_(k(r),function(l){e.addEventListener(l,n,!1)})}function T(e,r,n){_(k(r),function(l){e.removeEventListener(l,n,!1)})}function y(e,r){for(;e;){if(e==r)return!0;e=e.parentNode}return!1}function P(e,r){return e.indexOf(r)>-1}function k(e){return e.trim().split(/\s+/g)}function $(e,r,n){if(e.indexOf&&!n)return e.indexOf(r);for(var l=0;l<e.length;){if(n&&e[l][n]==r||!n&&e[l]===r)return l;l++}return-1}function W(e){return Array.prototype.slice.call(e,0)}function U(e,r,n){for(var l=[],u=[],f=0;f<e.length;){var M=r?e[f][r]:e[f];$(u,M)<0&&l.push(e[f]),u[f]=M,f++}return n&&(r?l=l.sort(function(Y,q){return Y[r]>q[r]}):l=l.sort()),l}function G(e,r){for(var n,l,u=r[0].toUpperCase()+r.slice(1),f=0;f<h.length;){if(n=h[f],l=n?n+u:r,l in e)return l;f++}return s}var z=1;function Vt(){return z++}function ut(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||i}var xt=/mobile|tablet|ip(ad|hone|od)|android/i,ct="ontouchstart"in i,jt=G(i,"PointerEvent")!==s,Zt=ct&&xt.test(navigator.userAgent),pe="touch",Jt="pen",Be="mouse",Qt="kinect",Kt=25,X=1,se=2,L=4,B=8,_e=1,ve=2,ge=4,ye=8,Te=16,Z=ve|ge,ae=ye|Te,ft=Z|ae,dt=["x","y"],Me=["clientX","clientY"];function V(e,r){var n=this;this.manager=e,this.callback=r,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(l){ue(e.options.enable,[e])&&n.handler(l)},this.init()}V.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(ut(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(ut(this.element),this.evWin,this.domHandler)}};function er(e){var r,n=e.options.inputClass;return n?r=n:jt?r=ze:Zt?r=Se:ct?r=Ve:r=Ae,new r(e,tr)}function tr(e,r,n){var l=n.pointers.length,u=n.changedPointers.length,f=r&X&&l-u===0,M=r&(L|B)&&l-u===0;n.isFirst=!!f,n.isFinal=!!M,f&&(e.session={}),n.eventType=r,rr(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function rr(e,r){var n=e.session,l=r.pointers,u=l.length;n.firstInput||(n.firstInput=mt(r)),u>1&&!n.firstMultiple?n.firstMultiple=mt(r):u===1&&(n.firstMultiple=!1);var f=n.firstInput,M=n.firstMultiple,H=M?M.center:f.center,Y=r.center=pt(l);r.timeStamp=N(),r.deltaTime=r.timeStamp-f.timeStamp,r.angle=Ge(H,Y),r.distance=we(H,Y),nr(n,r),r.offsetDirection=gt(r.deltaX,r.deltaY);var q=vt(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=q.x,r.overallVelocityY=q.y,r.overallVelocity=m(q.x)>m(q.y)?q.x:q.y,r.scale=M?ar(M.pointers,l):1,r.rotation=M?sr(M.pointers,l):0,r.maxPointers=n.prevInput?r.pointers.length>n.prevInput.maxPointers?r.pointers.length:n.prevInput.maxPointers:r.pointers.length,ir(n,r);var Q=e.element;y(r.srcEvent.target,Q)&&(Q=r.srcEvent.target),r.target=Q}function nr(e,r){var n=r.center,l=e.offsetDelta||{},u=e.prevDelta||{},f=e.prevInput||{};(r.eventType===X||f.eventType===L)&&(u=e.prevDelta={x:f.deltaX||0,y:f.deltaY||0},l=e.offsetDelta={x:n.x,y:n.y}),r.deltaX=u.x+(n.x-l.x),r.deltaY=u.y+(n.y-l.y)}function ir(e,r){var n=e.lastInterval||r,l=r.timeStamp-n.timeStamp,u,f,M,H;if(r.eventType!=B&&(l>Kt||n.velocity===s)){var Y=r.deltaX-n.deltaX,q=r.deltaY-n.deltaY,Q=vt(l,Y,q);f=Q.x,M=Q.y,u=m(Q.x)>m(Q.y)?Q.x:Q.y,H=gt(Y,q),e.lastInterval=r}else u=n.velocity,f=n.velocityX,M=n.velocityY,H=n.direction;r.velocity=u,r.velocityX=f,r.velocityY=M,r.direction=H}function mt(e){for(var r=[],n=0;n<e.pointers.length;)r[n]={clientX:v(e.pointers[n].clientX),clientY:v(e.pointers[n].clientY)},n++;return{timeStamp:N(),pointers:r,center:pt(r),deltaX:e.deltaX,deltaY:e.deltaY}}function pt(e){var r=e.length;if(r===1)return{x:v(e[0].clientX),y:v(e[0].clientY)};for(var n=0,l=0,u=0;u<r;)n+=e[u].clientX,l+=e[u].clientY,u++;return{x:v(n/r),y:v(l/r)}}function vt(e,r,n){return{x:r/e||0,y:n/e||0}}function gt(e,r){return e===r?_e:m(e)>=m(r)?e<0?ve:ge:r<0?ye:Te}function we(e,r,n){n||(n=dt);var l=r[n[0]]-e[n[0]],u=r[n[1]]-e[n[1]];return Math.sqrt(l*l+u*u)}function Ge(e,r,n){n||(n=dt);var l=r[n[0]]-e[n[0]],u=r[n[1]]-e[n[1]];return Math.atan2(u,l)*180/Math.PI}function sr(e,r){return Ge(r[1],r[0],Me)+Ge(e[1],e[0],Me)}function ar(e,r){return we(r[0],r[1],Me)/we(e[0],e[1],Me)}var or={mousedown:X,mousemove:se,mouseup:L},lr="mousedown",hr="mousemove mouseup";function Ae(){this.evEl=lr,this.evWin=hr,this.pressed=!1,V.apply(this,arguments)}F(Ae,V,{handler:function(r){var n=or[r.type];n&X&&r.button===0&&(this.pressed=!0),n&se&&r.which!==1&&(n=L),this.pressed&&(n&L&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:Be,srcEvent:r}))}});var ur={pointerdown:X,pointermove:se,pointerup:L,pointercancel:B,pointerout:B},cr={2:pe,3:Jt,4:Be,5:Qt},yt="pointerdown",Tt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(yt="MSPointerDown",Tt="MSPointerMove MSPointerUp MSPointerCancel");function ze(){this.evEl=yt,this.evWin=Tt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}F(ze,V,{handler:function(r){var n=this.store,l=!1,u=r.type.toLowerCase().replace("ms",""),f=ur[u],M=cr[r.pointerType]||r.pointerType,H=M==pe,Y=$(n,r.pointerId,"pointerId");f&X&&(r.button===0||H)?Y<0&&(n.push(r),Y=n.length-1):f&(L|B)&&(l=!0),!(Y<0)&&(n[Y]=r,this.callback(this.manager,f,{pointers:n,changedPointers:[r],pointerType:M,srcEvent:r}),l&&n.splice(Y,1))}});var fr={touchstart:X,touchmove:se,touchend:L,touchcancel:B},dr="touchstart",mr="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=dr,this.evWin=mr,this.started=!1,V.apply(this,arguments)}F(Et,V,{handler:function(r){var n=fr[r.type];if(n===X&&(this.started=!0),!!this.started){var l=pr.call(this,r,n);n&(L|B)&&l[0].length-l[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:l[0],changedPointers:l[1],pointerType:pe,srcEvent:r})}}});function pr(e,r){var n=W(e.touches),l=W(e.changedTouches);return r&(L|B)&&(n=U(n.concat(l),"identifier",!0)),[n,l]}var vr={touchstart:X,touchmove:se,touchend:L,touchcancel:B},gr="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=gr,this.targetIds={},V.apply(this,arguments)}F(Se,V,{handler:function(r){var n=vr[r.type],l=yr.call(this,r,n);!l||this.callback(this.manager,n,{pointers:l[0],changedPointers:l[1],pointerType:pe,srcEvent:r})}});function yr(e,r){var n=W(e.touches),l=this.targetIds;if(r&(X|se)&&n.length===1)return l[n[0].identifier]=!0,[n,n];var u,f,M=W(e.changedTouches),H=[],Y=this.target;if(f=n.filter(function(q){return y(q.target,Y)}),r===X)for(u=0;u<f.length;)l[f[u].identifier]=!0,u++;for(u=0;u<M.length;)l[M[u].identifier]&&H.push(M[u]),r&(L|B)&&delete l[M[u].identifier],u++;if(!!H.length)return[U(f.concat(H),"identifier",!0),H]}var Tr=2500,bt=25;function Ve(){V.apply(this,arguments);var e=he(this.handler,this);this.touch=new Se(this.manager,e),this.mouse=new Ae(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}F(Ve,V,{handler:function(r,n,l){var u=l.pointerType==pe,f=l.pointerType==Be;if(!(f&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(u)Er.call(this,n,l);else if(f&&br.call(this,l))return;this.callback(r,n,l)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Er(e,r){e&X?(this.primaryTouch=r.changedPointers[0].identifier,It.call(this,r)):e&(L|B)&&It.call(this,r)}function It(e){var r=e.changedPointers[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY};this.lastTouches.push(n);var l=this.lastTouches,u=function(){var f=l.indexOf(n);f>-1&&l.splice(f,1)};setTimeout(u,Tr)}}function br(e){for(var r=e.srcEvent.clientX,n=e.srcEvent.clientY,l=0;l<this.lastTouches.length;l++){var u=this.lastTouches[l],f=Math.abs(r-u.x),M=Math.abs(n-u.y);if(f<=bt&&M<=bt)return!0}return!1}var Ct=G(p.style,"touchAction"),Pt=Ct!==s,_t="compute",Mt="auto",xe="manipulation",oe="none",Ee="pan-x",be="pan-y",Ne=Cr();function je(e,r){this.manager=e,this.set(r)}je.prototype={set:function(e){e==_t&&(e=this.compute()),Pt&&this.manager.element.style&&Ne[e]&&(this.manager.element.style[Ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return _(this.manager.recognizers,function(r){ue(r.options.enable,[r])&&(e=e.concat(r.getTouchAction()))}),Ir(e.join(" "))},preventDefaults:function(e){var r=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var l=this.actions,u=P(l,oe)&&!Ne[oe],f=P(l,be)&&!Ne[be],M=P(l,Ee)&&!Ne[Ee];if(u){var H=e.pointers.length===1,Y=e.distance<2,q=e.deltaTime<250;if(H&&Y&&q)return}if(!(M&&f)&&(u||f&&n&Z||M&&n&ae))return this.preventSrc(r)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Ir(e){if(P(e,oe))return oe;var r=P(e,Ee),n=P(e,be);return r&&n?oe:r||n?r?Ee:be:P(e,xe)?xe:Mt}function Cr(){if(!Pt)return!1;var e={},r=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=r?i.CSS.supports("touch-action",n):!0}),e}var Re=1,x=2,ce=4,re=8,K=re,Ie=16,J=32;function ee(e){this.options=c({},this.defaults,e||{}),this.id=Vt(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Re,this.simultaneous={},this.requireFail=[]}ee.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(C(e,"recognizeWith",this))return this;var r=this.simultaneous;return e=ke(e,this),r[e.id]||(r[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return C(e,"dropRecognizeWith",this)?this:(e=ke(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(C(e,"requireFailure",this))return this;var r=this.requireFail;return e=ke(e,this),$(r,e)===-1&&(r.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(C(e,"dropRequireFailure",this))return this;e=ke(e,this);var r=$(this.requireFail,e);return r>-1&&this.requireFail.splice(r,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var r=this,n=this.state;function l(u){r.manager.emit(u,e)}n<re&&l(r.options.event+wt(n)),l(r.options.event),e.additionalEvent&&l(e.additionalEvent),n>=re&&l(r.options.event+wt(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=J},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(J|Re)))return!1;e++}return!0},recognize:function(e){var r=c({},e);if(!ue(this.options.enable,[this,r])){this.reset(),this.state=J;return}this.state&(K|Ie|J)&&(this.state=Re),this.state=this.process(r),this.state&(x|ce|re|Ie)&&this.tryEmit(r)},process:function(e){},getTouchAction:function(){},reset:function(){}};function wt(e){return e&Ie?"cancel":e&re?"end":e&ce?"move":e&x?"start":""}function At(e){return e==Te?"down":e==ye?"up":e==ve?"left":e==ge?"right":""}function ke(e,r){var n=r.manager;return n?n.get(e):e}function j(){ee.apply(this,arguments)}F(j,ee,{defaults:{pointers:1},attrTest:function(e){var r=this.options.pointers;return r===0||e.pointers.length===r},process:function(e){var r=this.state,n=e.eventType,l=r&(x|ce),u=this.attrTest(e);return l&&(n&B||!u)?r|Ie:l||u?n&L?r|re:r&x?r|ce:x:J}});function Oe(){j.apply(this,arguments),this.pX=null,this.pY=null}F(Oe,j,{defaults:{event:"pan",threshold:10,pointers:1,direction:ft},getTouchAction:function(){var e=this.options.direction,r=[];return e&Z&&r.push(be),e&ae&&r.push(Ee),r},directionTest:function(e){var r=this.options,n=!0,l=e.distance,u=e.direction,f=e.deltaX,M=e.deltaY;return u&r.direction||(r.direction&Z?(u=f===0?_e:f<0?ve:ge,n=f!=this.pX,l=Math.abs(e.deltaX)):(u=M===0?_e:M<0?ye:Te,n=M!=this.pY,l=Math.abs(e.deltaY))),e.direction=u,n&&l>r.threshold&&u&r.direction},attrTest:function(e){return j.prototype.attrTest.call(this,e)&&(this.state&x||!(this.state&x)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var r=At(e.direction);r&&(e.additionalEvent=this.options.event+r),this._super.emit.call(this,e)}});function Ze(){j.apply(this,arguments)}F(Ze,j,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&x)},emit:function(e){if(e.scale!==1){var r=e.scale<1?"in":"out";e.additionalEvent=this.options.event+r}this._super.emit.call(this,e)}});function Je(){ee.apply(this,arguments),this._timer=null,this._input=null}F(Je,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mt]},process:function(e){var r=this.options,n=e.pointers.length===r.pointers,l=e.distance<r.threshold,u=e.deltaTime>r.time;if(this._input=e,!l||!n||e.eventType&(L|B)&&!u)this.reset();else if(e.eventType&X)this.reset(),this._timer=I(function(){this.state=K,this.tryEmit()},r.time,this);else if(e.eventType&L)return K;return J},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===K&&(e&&e.eventType&L?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=N(),this.manager.emit(this.options.event,this._input)))}});function Qe(){j.apply(this,arguments)}F(Qe,j,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&x)}});function Ke(){j.apply(this,arguments)}F(Ke,j,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|ae,pointers:1},getTouchAction:function(){return Oe.prototype.getTouchAction.call(this)},attrTest:function(e){var r=this.options.direction,n;return r&(Z|ae)?n=e.overallVelocity:r&Z?n=e.overallVelocityX:r&ae&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&m(n)>this.options.velocity&&e.eventType&L},emit:function(e){var r=At(e.offsetDirection);r&&this.manager.emit(this.options.event+r,e),this.manager.emit(this.options.event,e)}});function De(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}F(De,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xe]},process:function(e){var r=this.options,n=e.pointers.length===r.pointers,l=e.distance<r.threshold,u=e.deltaTime<r.time;if(this.reset(),e.eventType&X&&this.count===0)return this.failTimeout();if(l&&u&&n){if(e.eventType!=L)return this.failTimeout();var f=this.pTime?e.timeStamp-this.pTime<r.interval:!0,M=!this.pCenter||we(this.pCenter,e.center)<r.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!M||!f?this.count=1:this.count+=1,this._input=e;var H=this.count%r.taps;if(H===0)return this.hasRequireFailures()?(this._timer=I(function(){this.state=K,this.tryEmit()},r.interval,this),x):K}return J},failTimeout:function(){return this._timer=I(function(){this.state=J},this.options.interval,this),J},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==K&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function te(e,r){return r=r||{},r.recognizers=S(r.recognizers,te.defaults.preset),new et(e,r)}te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Qe,{enable:!1}],[Ze,{enable:!1},["rotate"]],[Ke,{direction:Z}],[Oe,{direction:Z},["swipe"]],[De],[De,{event:"doubletap",taps:2},["tap"]],[Je]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pr=1,St=2;function et(e,r){this.options=c({},te.defaults,r||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=er(this),this.touchAction=new je(this,this.options.touchAction),Nt(this,!0),_(this.options.recognizers,function(n){var l=this.add(new n[0](n[1]));n[2]&&l.recognizeWith(n[2]),n[3]&&l.requireFailure(n[3])},this)}et.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?St:Pr},recognize:function(e){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(e);var n,l=this.recognizers,u=r.curRecognizer;(!u||u&&u.state&K)&&(u=r.curRecognizer=null);for(var f=0;f<l.length;)n=l[f],r.stopped!==St&&(!u||n==u||n.canRecognizeWith(u))?n.recognize(e):n.reset(),!u&&n.state&(x|ce|re)&&(u=r.curRecognizer=n),f++}},get:function(e){if(e instanceof ee)return e;for(var r=this.recognizers,n=0;n<r.length;n++)if(r[n].options.event==e)return r[n];return null},add:function(e){if(C(e,"add",this))return this;var r=this.get(e.options.event);return r&&this.remove(r),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(C(e,"remove",this))return this;if(e=this.get(e),e){var r=this.recognizers,n=$(r,e);n!==-1&&(r.splice(n,1),this.touchAction.update())}return this},on:function(e,r){if(e!==s&&r!==s){var n=this.handlers;return _(k(e),function(l){n[l]=n[l]||[],n[l].push(r)}),this}},off:function(e,r){if(e!==s){var n=this.handlers;return _(k(e),function(l){r?n[l]&&n[l].splice($(n[l],r),1):delete n[l]}),this}},emit:function(e,r){this.options.domEvents&&_r(e,r);var n=this.handlers[e]&&this.handlers[e].slice();if(!(!n||!n.length)){r.type=e,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var l=0;l<n.length;)n[l](r),l++}},destroy:function(){this.element&&Nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Nt(e,r){var n=e.element;if(!!n.style){var l;_(e.options.cssProps,function(u,f){l=G(n.style,f),r?(e.oldCssProps[l]=n.style[l],n.style[l]=u):n.style[l]=e.oldCssProps[l]||""}),r||(e.oldCssProps={})}}function _r(e,r){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=r,r.target.dispatchEvent(n)}c(te,{INPUT_START:X,INPUT_MOVE:se,INPUT_END:L,INPUT_CANCEL:B,STATE_POSSIBLE:Re,STATE_BEGAN:x,STATE_CHANGED:ce,STATE_ENDED:re,STATE_RECOGNIZED:K,STATE_CANCELLED:Ie,STATE_FAILED:J,DIRECTION_NONE:_e,DIRECTION_LEFT:ve,DIRECTION_RIGHT:ge,DIRECTION_UP:ye,DIRECTION_DOWN:Te,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:ae,DIRECTION_ALL:ft,Manager:et,Input:V,TouchAction:je,TouchInput:Se,MouseInput:Ae,PointerEventInput:ze,TouchMouseInput:Ve,SingleTouchInput:Et,Recognizer:ee,AttrRecognizer:j,Tap:De,Pan:Oe,Swipe:Ke,Pinch:Ze,Rotate:Qe,Press:Je,on:b,off:T,each:_,merge:w,extend:R,assign:c,inherit:F,bindFn:he,prefixed:G});var Mr=typeof i<"u"?i:typeof self<"u"?self:{};Mr.Hammer=te,typeof s=="function"&&s.amd?s(function(){return te}):t.exports?t.exports=te:i[o]=te})(window,document,"Hammer")})(Ft);const kt=Ft.exports;var ot=(t,i,a)=>{if(!i.has(t))throw TypeError("Cannot "+a)},fe=(t,i,a)=>(ot(t,i,"read from private field"),a?a.call(t):i.get(t)),le=(t,i,a)=>{if(i.has(t))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(t):i.set(t,a)},de=(t,i,a,o)=>(ot(t,i,"write to private field"),o?o.call(t,a):i.set(t,a),a),He=(t,i,a)=>(ot(t,i,"access private method"),a),ie,me,We,rt,Ut,nt,Ht,it,Wt,st,Yt;class Sr{constructor(i={}){le(this,rt),le(this,nt),le(this,it),le(this,st),le(this,ie,void 0),le(this,me,-1),le(this,We,50);const{decimalPlaces:a=-1,defaultQuantity:o=50}=i;this.setDecimalPlaces(a),this.setDefaultQuantity(o)}setDecimalPlaces(i=-1){if(typeof i!="number"||i%1!==0||i<-1)throw new TypeError("The argument 'decimalPlaces' must be a positive integer or -1.");de(this,me,i)}setDefaultQuantity(i){if(typeof i!="number"||i%1!==0||i<=0)throw new TypeError("The argument 'defaultQuantity' must be a positive integer.");de(this,We,i)}setPath(i,...a){switch(i){case"LINE":de(this,ie,He(this,rt,Ut).call(this,a[0],a[1]));break;case"TWO_ORDER_BEZIER":de(this,ie,He(this,nt,Ht).call(this,a[0],a[1],a[2]));break;case"THREE_ORDER_BEZIER":de(this,ie,He(this,it,Wt).call(this,a[0],a[1],a[2],a[3]));break;case"ARC":de(this,ie,He(this,st,Yt).call(this,a[0],a[1],a[2],a[3],a[4],a[5]));break;default:throw new TypeError(`The argument 'type' expact 'LINE', 'TWO_ORDER_BEZIER', 'THREE_ORDER_BEZIER', or 'ARC', but got '${i}'`)}return this}getPoint(i=0){if(!fe(this,ie))throw new Error("Please set path first.");if(i>1||i<0)throw new RangeError("The argument 't' must be between 0 and 1.");let{x:a,y:o}=fe(this,ie).call(this,i);return fe(this,me)>-1&&(a=Number(a.toFixed(fe(this,me))),o=Number(o.toFixed(fe(this,me)))),{x:a,y:o}}getPoints(i){if(i||(i=fe(this,We)),typeof i!="number"||i%1!==0||i<=0)throw new TypeError("The argument 'quantity' must be a positive integer.");const a=[];for(let o=0;o<i;o++)a.push(this.getPoint(o/(i-1)));return a}}ie=new WeakMap,me=new WeakMap,We=new WeakMap,rt=new WeakSet,Ut=function(t,i){const{x:a,y:o}=t,{x:s,y:h}=i;return p=>({x:a+(s-a)*p,y:o+(h-o)*p})},nt=new WeakSet,Ht=function(t,i,a){const{x:o,y:s}=t,{x:h,y:p}=i,{x:d,y:v}=a;return m=>({x:Math.pow(1-m,2)*o+2*m*(1-m)*h+Math.pow(m,2)*d,y:Math.pow(1-m,2)*s+2*m*(1-m)*p+Math.pow(m,2)*v})},it=new WeakSet,Wt=function(t,i,a,o){const{x:s,y:h}=t,{x:p,y:d}=i,{x:v,y:m}=a,{x:N,y:I}=o;return C=>({x:s*Math.pow(1-C,3)+3*p*C*Math.pow(1-C,2)+3*v*Math.pow(C,2)*(1-C)+N*Math.pow(C,3),y:h*Math.pow(1-C,3)+3*d*C*Math.pow(1-C,2)+3*m*Math.pow(C,2)*(1-C)+I*Math.pow(C,3)})},st=new WeakSet,Yt=function(t,i,a,o,s,h=!1){const p=2*Math.PI;if(h&&([o,s]=[s,o]),s-o>=p)s=o+p;else if(o!==s)if((o-s)%p===0)s=o;else for(o=o%p;s>o+p;)s-=p;const d=o>s?p-o+s:s-o;return v=>{h&&(v=1-v);const m=d*v+o;return{x:t+Math.cos(m)*a,y:i+Math.sin(m)*a}}};var Ye=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT",t))(Ye||{});function Nr(t,i,a,o){const s=a-t,h=o-i;return Math.atan2(h,s)}function Ot(t,i,a,o,s=[255,255,255],h=[255,245,196]){t.beginPath(),t.save(),t.translate(i,a);const[p,d,v]=s,m=t.createRadialGradient(0,0,o/2,0,0,o);m.addColorStop(0,`rgba(${p}, ${d}, ${v}, 0.5)`),m.addColorStop(1,`rgba(${p}, ${d}, ${v}, 0.1)`),t.arc(0,0,o,0,Math.PI*2),t.fillStyle=m,t.fill(),t.save(),t.globalCompositeOperation="destination-out",t.beginPath(),t.ellipse(o*.05,o*.05,o*.82,o*.95,Math.PI/4,0,Math.PI*2),t.fillStyle="rgba(0, 0, 0, 1)",t.fill(),t.restore(),t.save(),t.beginPath(),t.arc(0,0,o,0,Math.PI*2),t.shadowColor=`rgba(${h[0]}, ${h[1]}, ${h[2]}, 1)`,t.shadowBlur=20,t.shadowOffsetX=o/8,t.shadowOffsetY=o/8,t.strokeStyle=`rgba(${p}, ${d}, ${v}, 0.5)`,t.lineWidth=2,t.stroke(),t.restore(),t.beginPath(),t.ellipse(-o*.9*Math.cos(Math.PI/3),-o*.9*Math.sin(Math.PI/3),o*.1,o*.05,Math.PI*.8,0,Math.PI*2),t.fillStyle=`rgba(${p}, ${d}, ${v}, 0.75)`,t.ellipse(-o*.9*Math.cos(Math.PI*1.95),-o*.9*Math.sin(Math.PI*1.95),o*.06,o*.03,Math.PI*.6,0,Math.PI*2),t.fillStyle=`rgba(${p}, ${d}, ${v}, 0.5)`,t.fill(),t.restore()}function Rr(t,i,a,o,s,h=[255,255,255]){switch(t.save(),t.beginPath(),s){case 1:t.translate(i,a-o*.9),t.rotate(Math.PI/2);break;case 4:t.translate(i+o*.9,a),t.rotate(Math.PI);break;case 2:t.translate(i,a+o*.9),t.rotate(Math.PI*1.5);break;case 3:default:t.translate(i-o*.9,a);break}t.lineCap="round",t.lineJoin="round",t.moveTo(0,0),t.lineTo(o*.3*Math.cos(Math.PI/6),o*.3*Math.sin(Math.PI/6)),t.lineTo(o*.2,0),t.scale(1,-1),t.moveTo(0,0),t.lineTo(o*.3*Math.cos(Math.PI/6),o*.3*Math.sin(Math.PI/6)),t.lineTo(o*.2,0),t.lineWidth=2;const p=t.createLinearGradient(0,0,o*.3,0),[d,v,m]=h;p.addColorStop(0,`rgba(${d}, ${v}, ${m}, 0.8)`),p.addColorStop(1,`rgba(${d}, ${v}, ${m}, 0.3)`),t.fillStyle=p,t.strokeStyle=p,t.stroke(),t.fill(),t.restore()}function kr(t,i,a){t.save(),t.translate(i.baseCenter.x,i.baseCenter.y);const o=i.baseRadius,s={x:Math.cos(a-Math.PI/8)*o,y:Math.sin(a-Math.PI/8)*o},h={x:Math.cos(a)*(o+4),y:Math.sin(a)*(o+4)},p={x:Math.cos(a)*(o+16),y:Math.sin(a)*(o+16)},[d,v,m]=i.edgeLightColor;t.beginPath(),t.shadowColor=`rgba(${d}, ${v}, ${m}, 1)`,t.shadowBlur=10,t.arc(0,0,o,a-Math.PI/8,a+Math.PI/8),t.quadraticCurveTo(h.x,h.y,p.x,p.y),t.quadraticCurveTo(h.x,h.y,s.x,s.y),t.fillStyle=`rgba(${d}, ${v}, ${m}, 1)`,t.fill();const N=a-Math.PI/4,I=a+Math.PI/4,C=new Sr;let _=Math.floor(i.baseRadius*.8);_%2===0&&(_+=1);const g=C.setPath("ARC",0,0,o,N,I).getPoints(_);for(let c=0;c<_/2;c++){const R=g[c],w=g[g.length-1-c];t.save(),t.shadowColor=`rgba(${d}, ${v}, ${m}, 1)`,t.shadowBlur=10,t.fillStyle=`rgba(${d}, ${v}, ${m}, 0.5)`,t.beginPath(),t.arc(R.x,R.y,c*.12,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(w.x,w.y,c*.12,0,2*Math.PI),t.fill(),t.restore()}t.restore()}function Ce(t,i){t.clearRect(0,0,t.canvas.width,t.canvas.height),Ot(t,i.baseCenter.x,i.baseCenter.y,i.baseRadius,i.baseColor),Ot(t,i.handleCenter.x,i.handleCenter.y,i.handleRadius,i.handleColor),[1,4,2,3].forEach(o=>{const s=i.currentDirection===o?i.handleColor:i.baseColor;Rr(t,i.baseCenter.x,i.baseCenter.y,i.baseRadius,o,s)})}const Or=t=>{const i=Object.assign({width:400,height:300,baseRadius:80,handleRadius:40,baseColor:[255,255,255],handleColor:[245,255,196],edgeLightColor:[245,255,196],onDirectionChange:()=>{}},t),a=at(i.width,i.height),o=a.getContext("2d");let s=0;const h={width:a.width,height:a.height,get currentDirection(){return s},set currentDirection(I){s=I,i.onDirectionChange(I)},isDragging:!1,baseCenter:{x:i.width/2,y:i.height/2},handleCenter:{x:i.width/2,y:i.height/2},baseRadius:i.baseRadius,handleRadius:i.handleRadius,baseColor:i.baseColor,handleColor:i.handleColor,edgeLightColor:i.edgeLightColor};function p(I,C){const _=I-h.baseCenter.x,g=C-h.baseCenter.y,c=Math.sqrt(_*_+g*g);c>h.baseRadius-h.handleRadius?(h.handleCenter.x=h.baseCenter.x+_/c*(h.baseRadius-h.handleRadius),h.handleCenter.y=h.baseCenter.y+g/c*(h.baseRadius-h.handleRadius)):(h.handleCenter.x=I,h.handleCenter.y=C)}const d=I=>{h.currentDirection=I,Ce(o,h)},v=new kt(a);v.get("pan").set({direction:kt.DIRECTION_ALL}),v.on("panstart",I=>{const C=a.getBoundingClientRect(),_=I.center.x-C.left,g=I.center.y-C.top,c=_-h.handleCenter.x,R=g-h.handleCenter.y;Math.sqrt(c*c+R*R)<=h.handleRadius&&(h.isDragging=!0,p(_,g),Ce(o,h))}),v.on("panmove",I=>{if(h.isDragging){const C=a.getBoundingClientRect(),_=I.center.x-C.left,g=I.center.y-C.top;p(_,g),Ce(o,h);const c=Nr(0,0,_-h.baseCenter.x,g-h.baseCenter.y);kr(o,h,c),c>=-Math.PI/4&&c<Math.PI/4?h.currentDirection=4:c>=Math.PI/4&&c<Math.PI*3/4?h.currentDirection=2:c>=Math.PI*3/4&&c<=Math.PI||c>=-Math.PI&&c<=-Math.PI*3/4?h.currentDirection=3:c>=-Math.PI*3/4&&c<-Math.PI/4&&(h.currentDirection=1)}}),v.on("panend",()=>{h.isDragging&&(Object.assign(h,{isDragging:!1,handleCenter:{x:h.baseCenter.x,y:h.baseCenter.y},currentDirection:0}),Ce(o,h),console.log("Rocker Released"))});const m=I=>{switch(I.key){case"ArrowLeft":d(3);break;case"ArrowRight":d(4);break;case"ArrowUp":d(1);break;case"ArrowDown":d(2);break}};return document.addEventListener("keydown",m),Ce(o,h),{rocker:a,destroyRocker:()=>{document.removeEventListener("keydown",m),v.destroy(),a.remove()}}},Dr="GAME_OVER",Lr="DIRECTION_CHANGE",qe="STATUS_CHANGE",Xt="LENGTH_CHANGE",qt="DRAW",lt="EXIT",$t="RESTART",Bt=(t,i)=>{const a=typeof t=="string"?document.querySelector(t):t;if(!a||!("innerHTML"in a))throw new TypeError(`'el' expect a selector or a HTMLElement, but got a '${t}'`);const o=document.createElement("div");o.classList.add("home"),o.innerHTML=`
    <div class="background"></div>
    <div class="flowing-gradient"></div>
    <div class="particles" id="J_particles"></div>
    <div class="content">
      <h1 class="title">\u8D2A\u5403\u86C7</h1>
      <button class="btn btn-start" id="J_btn_start">\u5F00\u59CB\u6E38\u620F</button>
      <button class="btn btn-back" id="J_btn_back">\u8FD4\u56DE\u9996\u9875</button>
    </div>
  `;const s=()=>{i()},h=()=>{window.location.href="/mini-games"};return{mount:()=>{a.appendChild(o);for(let v=0;v<100;v++){const m=document.createElement("span");m.style.left=`${Math.random()*100}vw`,m.style.top=`${Math.random()*100}vh`,m.style.animationDelay=`${Math.random()*5}s`,document.querySelector("#J_particles").appendChild(m)}document.querySelector("#J_btn_start").addEventListener("click",s),document.querySelector("#J_btn_back").addEventListener("click",h)},unmount:()=>{document.querySelector("#J_btn_start").removeEventListener("click",s),document.querySelector("#J_btn_back").removeEventListener("click",h),a.removeChild(o)}}},Fr=t=>{const{width:i,height:a}=t.mainAreaSize,o=at(i,a),s=o.getContext("2d"),h="#000",p="#fff",d="#f40",v="#00ff88",m=t.rows,N=t.columns,I={top:(a-m*D)/2,right:(i-N*D)/2,bottom:(a-m*D)/2,left:(i-N*D)/2},C=()=>{for(let S=0;S<m;S++)for(let b=0;b<N;b++)s.strokeStyle="#e1e1e1",s.strokeRect(b*D,S*D,D,D)},_=S=>{const b=S[0],T=S.slice(1,-1),y=S[S.length-1];g(b,Fe(b,T[0])),T.forEach((P,k)=>{c(P,Fe(k===0?b:T[k-1],P),Fe(k===T.length-1?y:T[k+1],P))}),R(y,Fe(y,T.at(-1)))},g=(S,b)=>{s.save();const T=D,y=D;switch(s.translate(S.x*T+T/2,S.y*y+y/2),b){case E.top:s.rotate(-Math.PI/2);break;case E.right:break;case E.bottom:s.rotate(Math.PI/2);break;case E.left:s.rotate(Math.PI);break}s.beginPath(),s.moveTo(-T/2,-y/4),s.bezierCurveTo(T/2,-y*.8,T/2,y*.8,-T/2,y/4),s.fillStyle=h,s.fill(),s.beginPath(),s.arc(-T*.1,-y*.2,2,0,Math.PI*2),s.fillStyle=p,s.fill(),s.beginPath(),s.arc(-T*.1,y*.2,2,0,Math.PI*2),s.fillStyle=p,s.fill(),s.beginPath(),s.moveTo(T*.1,0),s.bezierCurveTo(T*.25,y*.2,T*.25,-y*.2,T*.5,0),s.strokeStyle=d,s.stroke(),s.restore()},c=(S,b,T)=>{s.save();const y=D,P=D;s.translate(S.x*y+y/2,S.y*P+P/2),s.beginPath();let k={x:0,y:0},$=null,W={x:0,y:0},U={x:0,y:0},G=null,z={x:0,y:0};switch(b){case E.top:k={x:-y/4,y:-P/2},U={x:y/4,y:-P/2},T===E.right&&(k={x:y/4,y:-P/2},U={x:-y/4,y:-P/2});break;case E.right:k={x:y/2,y:-P/4},U={x:y/2,y:P/4},T===E.top&&(k={x:y/2,y:P/4},U={x:y/2,y:-P/4});break;case E.bottom:k={x:-y/4,y:P/2},U={x:y/4,y:P/2},T===E.left&&(k={x:y/4,y:P/2},U={x:-y/4,y:P/2});break;case E.left:k={x:-y/2,y:-P/4},U={x:-y/2,y:P/4},T===E.bottom&&(k={x:-y/2,y:P/4},U={x:-y/2,y:-P/4});break}switch(T){case E.top:W={x:-y/4,y:-P/2},$=ne(b,T,k,W),z={x:y/4,y:-P/2},G=ne(b,T,U,z);break;case E.right:W={x:y/2,y:-P/4},$=ne(b,T,k,W),z={x:y/2,y:P/4},G=ne(b,T,U,z);break;case E.bottom:W={x:-y/4,y:P/2},$=ne(b,T,k,W),z={x:y/4,y:P/2},G=ne(b,T,U,z);break;case E.left:W={x:-y/2,y:-P/4},$=ne(b,T,k,W),z={x:-y/2,y:P/4},G=ne(b,T,U,z);break}s.beginPath(),s.lineWidth=1,s.moveTo(k.x,k.y),$?s.quadraticCurveTo($.x,$.y,W.x,W.y):s.lineTo(W.x,W.y),s.lineTo(z.x,z.y),G?s.quadraticCurveTo(G.x,G.y,U.x,U.y):s.lineTo(U.x,U.y),s.fillStyle=h,s.fill(),s.restore()},R=(S,b)=>{s.save();const T=D,y=D;switch(s.translate(S.x*T+T/2,S.y*y+y/2),b){case E.top:s.scale(Math.random()>.5?1:-1,-1);break;case E.right:s.rotate(Math.PI/2),s.scale(Math.random()>.5?1:-1,-1);break;case E.bottom:s.scale(Math.random()>.5?1:-1,1);break;case E.left:s.rotate(Math.PI/2),s.scale(Math.random()>.5?1:-1,1);break}s.beginPath(),s.fillStyle=h,s.moveTo(-T/4,-y/2),s.quadraticCurveTo(-T/2,y/2,T/2,y/2),s.quadraticCurveTo(-T/4,y/4,T/4,-y/2),s.fill(),s.restore()},w=S=>{s.save(),s.translate(S.x*D+D/2,S.y*D+D/2),s.fillStyle=v,s.beginPath(),s.shadowBlur=10,s.shadowColor=v,s.arc(0,0,D/4,0,Math.PI*2),s.fill(),s.restore()},F=()=>{s.clearRect(0,0,i,a),s.save(),s.translate(I.left,I.top),C(),_(t.snake),w(t.food),s.restore()};return{mount:S=>{S.appendChild(o),t.emitter.on(qt,F)},unmount:()=>{o.remove()},draw:F}},Ur=t=>{const i=t.mainAreaSize.width*.5,a=t.footerAreaSize.height,o=at(i,a),s=o.getContext("2d"),h=[{name:"ctrl",text:"\u6682\u505C\u6E38\u620F",cx:i/4,cy:a/4,width:Math.max(80,i/6),height:a/4,status:"default"},{name:"esc",text:"\u4E0D\u73A9\u4E86",cx:i/4,cy:a*3/4,width:Math.max(80,i/6),height:a/4,status:"default"}],p=g=>{s.save(),s.beginPath(),s.translate(g.cx,g.cy),s.roundRect(-g.width/2,-g.height/2,g.width,g.height,a/16),s.strokeStyle=g.status==="hover"?"transparent":"#333",s.stroke();const c=s.createLinearGradient(0,0,g.width,g.height);c.addColorStop(0,"#00ff88"),c.addColorStop(1,"#0088ff"),s.fillStyle=g.status==="hover"?c:"transparent",s.fill(),s.restore(),Pe(s,g.name==="ctrl"?t.status===O.paused?"\u7EE7\u7EED\u6E38\u620F":t.status===O.finished?"\u518D\u6765\u4E00\u5C40":"\u6682\u505C\u6E38\u620F":g.text,{x:g.cx,y:g.cy,fontSize:g.height*.4,color:g.status==="hover"?"#fff":"#333",textAlign:"center",textBaseline:"middle"})},d=()=>{h.forEach(g=>{p(g)})},v=(g,c)=>{Pe(s,"\u72B6\u6001\uFF1A",{x:i*3/4,y:a/4,fontSize:a/10,color:"#333",textAlign:"right",textBaseline:"middle"}),Pe(s,g===O.paused?"\u6682\u505C\u4E2D":g===O.finished?"\u5DF2\u7ED3\u675F":"\u6E38\u620F\u4E2D",{x:i*3/4,y:a/4,fontSize:Math.min(14,a/8),color:g===O.paused?"#ff0":g===O.finished?"#f40":"#0088ff",textAlign:"left",textBaseline:"middle"}),Pe(s,"\u957F\u5EA6\uFF1A",{x:i*3/4,y:a*3/4,fontSize:a/10,color:"#333",textAlign:"right",textBaseline:"middle"}),Pe(s,`${c}`,{x:i*3/4,y:a*3/4,fontSize:Math.min(14,a/8),color:"#ff0088",textAlign:"left",textBaseline:"middle"})},m=()=>{s.clearRect(0,0,i,a),d(),v(t.status,t.length)},N=g=>{const c=g.clientX-o.offsetLeft,R=g.clientY-o.offsetTop;for(const w of h){if(c>w.cx-w.width/2&&c<w.cx+w.width/2&&R>w.cy-w.height/2&&R<w.cy+w.height/2){w.status="hover",o.style.cursor="pointer";break}w.status="default",o.style.cursor="default"}m()},I=g=>{const c=g.clientX-o.offsetLeft,R=g.clientY-o.offsetTop;for(const w of h)if(c>w.cx-w.width/2&&c<w.cx+w.width/2&&R>w.cy-w.height/2&&R<w.cy+w.height/2){console.log(w.name),w.name==="ctrl"?t.status===O.finished?t.emitter.emit($t):t.emitter.emit(qe,t.status===O.paused?O.playing:O.paused):w.name==="esc"&&t.emitter.emit(lt);break}},C=g=>{g.appendChild(o),document.addEventListener("mousemove",N),document.addEventListener("click",I)};return t.emitter.on(qe,m),t.emitter.on(Xt,m),{mount:C,unmount:()=>{o.remove()},render:m}},Hr=t=>{const i=t.footerAreaSize.width*.5,a=t.footerAreaSize.height,o=Math.min(i,a),{rocker:s,destroyRocker:h}=Or({width:i,height:a,baseRadius:o*.4,handleRadius:o*.2,baseColor:[255,255,255],handleColor:[0,255,136],edgeLightColor:[0,255,136],onDirectionChange:v=>{t.direction=v===Ye.UP?A.up:v===Ye.RIGHT?A.right:v===Ye.DOWN?A.down:A.left}});return{mount:v=>{v.appendChild(s)},unmount:()=>{h()}}};function Pe(t,i,a={}){const{x:o,y:s,fontSize:h,fontFamily:p,fontWeight:d,color:v,textAlign:m,textBaseline:N}=a;t.save(),t.font=`${d!=null?d:"normal"} ${h!=null?h:16}px ${p!=null?p:"Arial"}`,t.fillStyle=v!=null?v:"#000",t.textAlign=m!=null?m:"center",t.textBaseline=N!=null?N:"middle",t.fillText(i,o!=null?o:0,s!=null?s:0),t.restore()}const ht=class{constructor(){Le(this,"_maxListeners");Le(this,"_events");this._events=Object.create(null)}get events(){return this._events}get eventNames(){return Object.keys(this._events)}get maxListener(){return this._maxListeners?this._maxListeners:ht.defaultMaxListener}set maxListener(i){this._maxListeners=i}on(i,a){this._events[i]?this._events[i].length>=this.maxListener?console.warn("\u76D1\u542C\u7684\u4E8B\u4EF6\u4E0D\u80FD\u8D85\u8FC7\u8BBE\u7F6E\u7684\u6700\u5927\u76D1\u542C\u6570\u3002"):this._events[i].push(a):this._events[i]=[a]}once(i,a){const o=(...s)=>{a(...s),this.off(i,o)};o.listen=a,this.on(i,o)}emit(i,...a){this._events[i]&&this._events[i].forEach(o=>{o.call(this,...a)})}off(i,a){this._events[i]&&(this._events[i]=this._events[i].filter(o=>a!==o&&a!==o.listen))}clear(){this._events=Object.create(null)}};let Xe=ht;Le(Xe,"defaultMaxListener",10);var Gt="Expected a function",Dt=0/0,Wr="[object Symbol]",Yr=/^\s+|\s+$/g,Xr=/^[-+]0x[0-9a-f]+$/i,qr=/^0b[01]+$/i,$r=/^0o[0-7]+$/i,Br=parseInt,Gr=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,zr=typeof self=="object"&&self&&self.Object===Object&&self,Vr=Gr||zr||Function("return this")(),xr=Object.prototype,jr=xr.toString,Zr=Math.max,Jr=Math.min,tt=function(){return Vr.Date.now()};function Qr(t,i,a){var o,s,h,p,d,v,m=0,N=!1,I=!1,C=!0;if(typeof t!="function")throw new TypeError(Gt);i=Lt(i)||0,$e(a)&&(N=!!a.leading,I="maxWait"in a,h=I?Zr(Lt(a.maxWait)||0,i):h,C="trailing"in a?!!a.trailing:C);function _(b){var T=o,y=s;return o=s=void 0,m=b,p=t.apply(y,T),p}function g(b){return m=b,d=setTimeout(w,i),N?_(b):p}function c(b){var T=b-v,y=b-m,P=i-T;return I?Jr(P,h-y):P}function R(b){var T=b-v,y=b-m;return v===void 0||T>=i||T<0||I&&y>=h}function w(){var b=tt();if(R(b))return F(b);d=setTimeout(w,c(b))}function F(b){return d=void 0,C&&o?_(b):(o=s=void 0,p)}function he(){d!==void 0&&clearTimeout(d),m=0,o=v=s=d=void 0}function ue(){return d===void 0?p:F(tt())}function S(){var b=tt(),T=R(b);if(o=arguments,s=this,v=b,T){if(d===void 0)return g(v);if(I)return d=setTimeout(w,i),_(v)}return d===void 0&&(d=setTimeout(w,i)),p}return S.cancel=he,S.flush=ue,S}function Kr(t,i,a){var o=!0,s=!0;if(typeof t!="function")throw new TypeError(Gt);return $e(a)&&(o="leading"in a?!!a.leading:o,s="trailing"in a?!!a.trailing:s),Qr(t,i,{leading:o,maxWait:i,trailing:s})}function $e(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function en(t){return!!t&&typeof t=="object"}function tn(t){return typeof t=="symbol"||en(t)&&jr.call(t)==Wr}function Lt(t){if(typeof t=="number")return t;if(tn(t))return Dt;if($e(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=$e(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Yr,"");var a=qr.test(t);return a||$r.test(t)?Br(t.slice(2),a?2:8):Xr.test(t)?Dt:+t}var rn=Kr;const nn=()=>{let t=O.finished,i=A.right;const a=new Xe,{innerWidth:o,innerHeight:s}=window,h={width:o,height:s*.8},p={width:o,height:s*.2};return{columns:Math.floor(h.width/D),rows:Math.floor(h.height/D),mainAreaSize:h,footerAreaSize:p,speed:100,snake:[],food:{x:0,y:0},get status(){return t},set status(d){t=d,a.emit(qe,d)},get direction(){return i},set direction(d){if(t===O.playing){switch(i){case A.up:d!==A.down&&(i=d);break;case A.right:d!==A.left&&(i=d);break;case A.down:d!==A.up&&(i=d);break;case A.left:d!==A.right&&(i=d);break}a.emit(Lr,d)}},get length(){return this.snake.length},startTime:0,emitter:a}},sn=t=>{const{columns:i,rows:a}=t;let o=0;const s=()=>{document.addEventListener("keydown",d,!1),t.emitter.on(qe,()=>{t.status===O.paused||t.status===O.finished?cancelAnimationFrame(o):t.status===O.playing&&m()}),t.emitter.on($t,()=>{h()}),h()},h=()=>{t.snake=[{part:"HEAD",x:Math.floor(i/2),y:Math.floor(a/2)},{part:"BODY",x:Math.floor(i/2)-1,y:Math.floor(a/2)},{part:"TAIL",x:Math.floor(i/2)-2,y:Math.floor(a/2)}],t.food=p(),t.direction=A.right,t.status=O.playing,t.startTime=performance.now()},p=()=>{const I=t.snake,{columns:C,rows:_}=t,g=Rt(0,C-1),c=Rt(0,_-1);return t.snake.length>=C*_?(t.emitter.emit(Dr,t.snake.length),{x:0,y:0}):I.some(R=>R.x===g&&R.y===c)?p():{x:g,y:c}},d=rn(I=>{switch(I.code){case"ArrowUp":case"KeyW":t.direction!==A.down&&(t.direction=A.up);break;case"ArrowRight":case"KeyD":t.direction!==A.left&&(t.direction=A.right);break;case"ArrowDown":case"KeyS":t.direction!==A.up&&(t.direction=A.down);break;case"ArrowLeft":case"KeyA":t.direction!==A.right&&(t.direction=A.left);break;case"Space":if(t.status===O.finished)return;t.status===O.paused?(t.status=O.playing,m()):t.status=O.paused;break;case"Escape":t.emitter.emit(lt);break}},t.speed),v=()=>{const I=t.food,{columns:C,rows:_}=t,g=t.snake[0],c={...g};switch(t.direction){case A.up:c.y-=1;break;case A.right:c.x+=1;break;case A.down:c.y+=1;break;case A.left:c.x-=1;break}if(c.x<0||c.x>=C||c.y<0||c.y>=_)switch(t.direction){case A.left:c.x=C-1;break;case A.right:c.x=0;break;case A.up:c.y=_-1;break;case A.down:c.y=0;break}if(t.snake.some(R=>R.x===c.x&&R.y===c.y)){t.status=O.finished;return}if(c.x===I.x&&c.y===I.y){g.part="BODY",t.snake.unshift(c),t.food=p(),t.emitter.emit(Xt,t.snake.length);return}g.part="BODY",t.snake.pop(),t.snake.unshift(c),t.snake.at(-1).part="TAIL"},m=()=>{if(t.status!==O.playing){cancelAnimationFrame(o);return}const I=performance.now();I-t.startTime>=t.speed&&(v(),t.startTime=I),t.emitter.emit(qt),o=requestAnimationFrame(m)};return{init:s,destroy:()=>{cancelAnimationFrame(o),document.removeEventListener("keydown",d,!1)}}};const zt=()=>{const t=nn(),i=t.mainAreaSize,a=t.footerAreaSize,o=document.querySelector("#app"),s=document.createElement("footer");s.style.cssText=`
    display: flex;
    align-items: center;
    width: ${i.width}px;
    height: ${a.height}px;
  `;const h=Fr(t),p=Hr(t),d=Ur(t);h.mount(o),p.mount(s),d.mount(s),o.appendChild(s);const{init:v,destroy:m}=sn(t);v(),t.emitter.on(lt,()=>{m(),p.unmount(),d.unmount(),h.unmount(),o.removeChild(s);const N=Bt("#app",()=>{N.unmount(),zt()});N.mount()})};window.addEventListener("DOMContentLoaded",()=>{const t=Bt("#app",()=>{t.unmount(),zt()});t.mount()});
