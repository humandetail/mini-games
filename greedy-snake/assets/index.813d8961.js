var Mr=Object.defineProperty;var wr=(t,i,a)=>i in t?Mr(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a;var Le=(t,i,a)=>(wr(t,typeof i!="symbol"?i+"":i,a),a);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function a(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=a(s);fetch(s.href,h)}})();const R=20;var S=(t=>(t[t.up=0]="up",t[t.right=1]="right",t[t.down=2]="down",t[t.left=3]="left",t))(S||{}),E=(t=>(t.top="top",t.right="right",t.bottom="bottom",t.left="left",t))(E||{}),O=(t=>(t[t.finished=0]="finished",t[t.playing=1]="playing",t[t.paused=2]="paused",t))(O||{});const kt=(t,i)=>Math.round(Math.random()*(i-t))+t,at=(t=400,i=300,a)=>{var h;const o=a!=null?a:document.createElement("canvas");o.style.width=`${t}px`,o.style.height=`${i}px`;const s=(h=window.devicePixelRatio)!=null?h:1;return o.width=Math.floor(s*t),o.height=Math.floor(s*i),o.getContext("2d").scale(s,s),o},Fe=({x:t,y:i},{x:a,y:o})=>{if(t===a){if(i-o===1)return E.bottom;if(i-o===-1)return E.top;if(i-o<-1)return E.bottom;if(i-o>1)return E.top}if(i===o){if(t-a===1)return E.right;if(t-a===-1)return E.left;if(t-a<-1)return E.right;if(t-a>1)return E.left}return E.right},ne=(t,i,a,o)=>t===E.top&&i===E.bottom?null:t===E.top&&i===E.right?{x:a.x,y:o.y}:t===E.top&&i===E.left?{x:a.x,y:o.y}:t===E.bottom&&i===E.top?null:t===E.bottom&&i===E.right?{x:a.x,y:o.y}:t===E.bottom&&i===E.left?{x:a.x,y:o.y}:t===E.left&&i===E.top?{x:o.x,y:a.y}:t===E.left&&i===E.right?null:t===E.left&&i===E.bottom?{x:o.x,y:a.y}:t===E.right&&i===E.top?{x:o.x,y:a.y}:t===E.right&&i===E.bottom?{x:o.x,y:a.y}:(t===E.right&&i===E.left,null);var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ft={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(i,a,o,s){var h=["","webkit","Moz","MS","ms","o"],m=a.createElement("div"),d="function",p=Math.round,v=Math.abs,A=Date.now;function P(e,r,n){return setTimeout(he(e,n),r)}function I(e,r,n){return Array.isArray(e)?(_(e,n[r],n),!0):!1}function _(e,r,n){var l;if(!!e)if(e.forEach)e.forEach(r,n);else if(e.length!==s)for(l=0;l<e.length;)r.call(n,e[l],l,e),l++;else for(l in e)e.hasOwnProperty(l)&&r.call(n,e[l],l,e)}function c(e,r,n){var l="DEPRECATED METHOD: "+r+`
`+n+` AT 
`;return function(){var u=new Error("get-stack-trace"),f=u&&u.stack?u.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",M=i.console&&(i.console.warn||i.console.log);return M&&M.call(i.console,l,f),e.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(r){if(r===s||r===null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(r),l=1;l<arguments.length;l++){var u=arguments[l];if(u!==s&&u!==null)for(var f in u)u.hasOwnProperty(f)&&(n[f]=u[f])}return n}:g=Object.assign;var L=c(function(r,n,l){for(var u=Object.keys(n),f=0;f<u.length;)(!l||l&&r[u[f]]===s)&&(r[u[f]]=n[u[f]]),f++;return r},"extend","Use `assign`."),w=c(function(r,n){return L(r,n,!0)},"merge","Use `assign`.");function F(e,r,n){var l=r.prototype,u;u=e.prototype=Object.create(l),u.constructor=e,u._super=l,n&&g(u,n)}function he(e,r){return function(){return e.apply(r,arguments)}}function ue(e,r){return typeof e==d?e.apply(r&&r[0]||s,r):e}function N(e,r){return e===s?r:e}function b(e,r,n){_(k(r),function(l){e.addEventListener(l,n,!1)})}function T(e,r,n){_(k(r),function(l){e.removeEventListener(l,n,!1)})}function y(e,r){for(;e;){if(e==r)return!0;e=e.parentNode}return!1}function C(e,r){return e.indexOf(r)>-1}function k(e){return e.trim().split(/\s+/g)}function $(e,r,n){if(e.indexOf&&!n)return e.indexOf(r);for(var l=0;l<e.length;){if(n&&e[l][n]==r||!n&&e[l]===r)return l;l++}return-1}function W(e){return Array.prototype.slice.call(e,0)}function U(e,r,n){for(var l=[],u=[],f=0;f<e.length;){var M=r?e[f][r]:e[f];$(u,M)<0&&l.push(e[f]),u[f]=M,f++}return n&&(r?l=l.sort(function(Y,q){return Y[r]>q[r]}):l=l.sort()),l}function G(e,r){for(var n,l,u=r[0].toUpperCase()+r.slice(1),f=0;f<h.length;){if(n=h[f],l=n?n+u:r,l in e)return l;f++}return s}var z=1;function zt(){return z++}function ut(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||i}var Vt=/mobile|tablet|ip(ad|hone|od)|android/i,ct="ontouchstart"in i,xt=G(i,"PointerEvent")!==s,jt=ct&&Vt.test(navigator.userAgent),me="touch",Zt="pen",Be="mouse",Jt="kinect",Qt=25,X=1,se=2,D=4,B=8,_e=1,ve=2,ge=4,ye=8,Te=16,Z=ve|ge,ae=ye|Te,ft=Z|ae,dt=["x","y"],Me=["clientX","clientY"];function V(e,r){var n=this;this.manager=e,this.callback=r,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(l){ue(e.options.enable,[e])&&n.handler(l)},this.init()}V.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(ut(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(ut(this.element),this.evWin,this.domHandler)}};function Kt(e){var r,n=e.options.inputClass;return n?r=n:xt?r=ze:jt?r=Se:ct?r=Ve:r=Ae,new r(e,er)}function er(e,r,n){var l=n.pointers.length,u=n.changedPointers.length,f=r&X&&l-u===0,M=r&(D|B)&&l-u===0;n.isFirst=!!f,n.isFinal=!!M,f&&(e.session={}),n.eventType=r,tr(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function tr(e,r){var n=e.session,l=r.pointers,u=l.length;n.firstInput||(n.firstInput=pt(r)),u>1&&!n.firstMultiple?n.firstMultiple=pt(r):u===1&&(n.firstMultiple=!1);var f=n.firstInput,M=n.firstMultiple,H=M?M.center:f.center,Y=r.center=mt(l);r.timeStamp=A(),r.deltaTime=r.timeStamp-f.timeStamp,r.angle=Ge(H,Y),r.distance=we(H,Y),rr(n,r),r.offsetDirection=gt(r.deltaX,r.deltaY);var q=vt(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=q.x,r.overallVelocityY=q.y,r.overallVelocity=v(q.x)>v(q.y)?q.x:q.y,r.scale=M?sr(M.pointers,l):1,r.rotation=M?ir(M.pointers,l):0,r.maxPointers=n.prevInput?r.pointers.length>n.prevInput.maxPointers?r.pointers.length:n.prevInput.maxPointers:r.pointers.length,nr(n,r);var Q=e.element;y(r.srcEvent.target,Q)&&(Q=r.srcEvent.target),r.target=Q}function rr(e,r){var n=r.center,l=e.offsetDelta||{},u=e.prevDelta||{},f=e.prevInput||{};(r.eventType===X||f.eventType===D)&&(u=e.prevDelta={x:f.deltaX||0,y:f.deltaY||0},l=e.offsetDelta={x:n.x,y:n.y}),r.deltaX=u.x+(n.x-l.x),r.deltaY=u.y+(n.y-l.y)}function nr(e,r){var n=e.lastInterval||r,l=r.timeStamp-n.timeStamp,u,f,M,H;if(r.eventType!=B&&(l>Qt||n.velocity===s)){var Y=r.deltaX-n.deltaX,q=r.deltaY-n.deltaY,Q=vt(l,Y,q);f=Q.x,M=Q.y,u=v(Q.x)>v(Q.y)?Q.x:Q.y,H=gt(Y,q),e.lastInterval=r}else u=n.velocity,f=n.velocityX,M=n.velocityY,H=n.direction;r.velocity=u,r.velocityX=f,r.velocityY=M,r.direction=H}function pt(e){for(var r=[],n=0;n<e.pointers.length;)r[n]={clientX:p(e.pointers[n].clientX),clientY:p(e.pointers[n].clientY)},n++;return{timeStamp:A(),pointers:r,center:mt(r),deltaX:e.deltaX,deltaY:e.deltaY}}function mt(e){var r=e.length;if(r===1)return{x:p(e[0].clientX),y:p(e[0].clientY)};for(var n=0,l=0,u=0;u<r;)n+=e[u].clientX,l+=e[u].clientY,u++;return{x:p(n/r),y:p(l/r)}}function vt(e,r,n){return{x:r/e||0,y:n/e||0}}function gt(e,r){return e===r?_e:v(e)>=v(r)?e<0?ve:ge:r<0?ye:Te}function we(e,r,n){n||(n=dt);var l=r[n[0]]-e[n[0]],u=r[n[1]]-e[n[1]];return Math.sqrt(l*l+u*u)}function Ge(e,r,n){n||(n=dt);var l=r[n[0]]-e[n[0]],u=r[n[1]]-e[n[1]];return Math.atan2(u,l)*180/Math.PI}function ir(e,r){return Ge(r[1],r[0],Me)+Ge(e[1],e[0],Me)}function sr(e,r){return we(r[0],r[1],Me)/we(e[0],e[1],Me)}var ar={mousedown:X,mousemove:se,mouseup:D},or="mousedown",lr="mousemove mouseup";function Ae(){this.evEl=or,this.evWin=lr,this.pressed=!1,V.apply(this,arguments)}F(Ae,V,{handler:function(r){var n=ar[r.type];n&X&&r.button===0&&(this.pressed=!0),n&se&&r.which!==1&&(n=D),this.pressed&&(n&D&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:Be,srcEvent:r}))}});var hr={pointerdown:X,pointermove:se,pointerup:D,pointercancel:B,pointerout:B},ur={2:me,3:Zt,4:Be,5:Jt},yt="pointerdown",Tt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(yt="MSPointerDown",Tt="MSPointerMove MSPointerUp MSPointerCancel");function ze(){this.evEl=yt,this.evWin=Tt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}F(ze,V,{handler:function(r){var n=this.store,l=!1,u=r.type.toLowerCase().replace("ms",""),f=hr[u],M=ur[r.pointerType]||r.pointerType,H=M==me,Y=$(n,r.pointerId,"pointerId");f&X&&(r.button===0||H)?Y<0&&(n.push(r),Y=n.length-1):f&(D|B)&&(l=!0),!(Y<0)&&(n[Y]=r,this.callback(this.manager,f,{pointers:n,changedPointers:[r],pointerType:M,srcEvent:r}),l&&n.splice(Y,1))}});var cr={touchstart:X,touchmove:se,touchend:D,touchcancel:B},fr="touchstart",dr="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=fr,this.evWin=dr,this.started=!1,V.apply(this,arguments)}F(Et,V,{handler:function(r){var n=cr[r.type];if(n===X&&(this.started=!0),!!this.started){var l=pr.call(this,r,n);n&(D|B)&&l[0].length-l[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:l[0],changedPointers:l[1],pointerType:me,srcEvent:r})}}});function pr(e,r){var n=W(e.touches),l=W(e.changedTouches);return r&(D|B)&&(n=U(n.concat(l),"identifier",!0)),[n,l]}var mr={touchstart:X,touchmove:se,touchend:D,touchcancel:B},vr="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=vr,this.targetIds={},V.apply(this,arguments)}F(Se,V,{handler:function(r){var n=mr[r.type],l=gr.call(this,r,n);!l||this.callback(this.manager,n,{pointers:l[0],changedPointers:l[1],pointerType:me,srcEvent:r})}});function gr(e,r){var n=W(e.touches),l=this.targetIds;if(r&(X|se)&&n.length===1)return l[n[0].identifier]=!0,[n,n];var u,f,M=W(e.changedTouches),H=[],Y=this.target;if(f=n.filter(function(q){return y(q.target,Y)}),r===X)for(u=0;u<f.length;)l[f[u].identifier]=!0,u++;for(u=0;u<M.length;)l[M[u].identifier]&&H.push(M[u]),r&(D|B)&&delete l[M[u].identifier],u++;if(!!H.length)return[U(f.concat(H),"identifier",!0),H]}var yr=2500,bt=25;function Ve(){V.apply(this,arguments);var e=he(this.handler,this);this.touch=new Se(this.manager,e),this.mouse=new Ae(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}F(Ve,V,{handler:function(r,n,l){var u=l.pointerType==me,f=l.pointerType==Be;if(!(f&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(u)Tr.call(this,n,l);else if(f&&Er.call(this,l))return;this.callback(r,n,l)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Tr(e,r){e&X?(this.primaryTouch=r.changedPointers[0].identifier,It.call(this,r)):e&(D|B)&&It.call(this,r)}function It(e){var r=e.changedPointers[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY};this.lastTouches.push(n);var l=this.lastTouches,u=function(){var f=l.indexOf(n);f>-1&&l.splice(f,1)};setTimeout(u,yr)}}function Er(e){for(var r=e.srcEvent.clientX,n=e.srcEvent.clientY,l=0;l<this.lastTouches.length;l++){var u=this.lastTouches[l],f=Math.abs(r-u.x),M=Math.abs(n-u.y);if(f<=bt&&M<=bt)return!0}return!1}var Ct=G(m.style,"touchAction"),Pt=Ct!==s,_t="compute",Mt="auto",xe="manipulation",oe="none",Ee="pan-x",be="pan-y",Ne=Ir();function je(e,r){this.manager=e,this.set(r)}je.prototype={set:function(e){e==_t&&(e=this.compute()),Pt&&this.manager.element.style&&Ne[e]&&(this.manager.element.style[Ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return _(this.manager.recognizers,function(r){ue(r.options.enable,[r])&&(e=e.concat(r.getTouchAction()))}),br(e.join(" "))},preventDefaults:function(e){var r=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var l=this.actions,u=C(l,oe)&&!Ne[oe],f=C(l,be)&&!Ne[be],M=C(l,Ee)&&!Ne[Ee];if(u){var H=e.pointers.length===1,Y=e.distance<2,q=e.deltaTime<250;if(H&&Y&&q)return}if(!(M&&f)&&(u||f&&n&Z||M&&n&ae))return this.preventSrc(r)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function br(e){if(C(e,oe))return oe;var r=C(e,Ee),n=C(e,be);return r&&n?oe:r||n?r?Ee:be:C(e,xe)?xe:Mt}function Ir(){if(!Pt)return!1;var e={},r=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=r?i.CSS.supports("touch-action",n):!0}),e}var ke=1,x=2,ce=4,re=8,K=re,Ie=16,J=32;function ee(e){this.options=g({},this.defaults,e||{}),this.id=zt(),this.manager=null,this.options.enable=N(this.options.enable,!0),this.state=ke,this.simultaneous={},this.requireFail=[]}ee.prototype={defaults:{},set:function(e){return g(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(I(e,"recognizeWith",this))return this;var r=this.simultaneous;return e=Oe(e,this),r[e.id]||(r[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return I(e,"dropRecognizeWith",this)?this:(e=Oe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(I(e,"requireFailure",this))return this;var r=this.requireFail;return e=Oe(e,this),$(r,e)===-1&&(r.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(I(e,"dropRequireFailure",this))return this;e=Oe(e,this);var r=$(this.requireFail,e);return r>-1&&this.requireFail.splice(r,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var r=this,n=this.state;function l(u){r.manager.emit(u,e)}n<re&&l(r.options.event+wt(n)),l(r.options.event),e.additionalEvent&&l(e.additionalEvent),n>=re&&l(r.options.event+wt(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=J},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(J|ke)))return!1;e++}return!0},recognize:function(e){var r=g({},e);if(!ue(this.options.enable,[this,r])){this.reset(),this.state=J;return}this.state&(K|Ie|J)&&(this.state=ke),this.state=this.process(r),this.state&(x|ce|re|Ie)&&this.tryEmit(r)},process:function(e){},getTouchAction:function(){},reset:function(){}};function wt(e){return e&Ie?"cancel":e&re?"end":e&ce?"move":e&x?"start":""}function At(e){return e==Te?"down":e==ye?"up":e==ve?"left":e==ge?"right":""}function Oe(e,r){var n=r.manager;return n?n.get(e):e}function j(){ee.apply(this,arguments)}F(j,ee,{defaults:{pointers:1},attrTest:function(e){var r=this.options.pointers;return r===0||e.pointers.length===r},process:function(e){var r=this.state,n=e.eventType,l=r&(x|ce),u=this.attrTest(e);return l&&(n&B||!u)?r|Ie:l||u?n&D?r|re:r&x?r|ce:x:J}});function Re(){j.apply(this,arguments),this.pX=null,this.pY=null}F(Re,j,{defaults:{event:"pan",threshold:10,pointers:1,direction:ft},getTouchAction:function(){var e=this.options.direction,r=[];return e&Z&&r.push(be),e&ae&&r.push(Ee),r},directionTest:function(e){var r=this.options,n=!0,l=e.distance,u=e.direction,f=e.deltaX,M=e.deltaY;return u&r.direction||(r.direction&Z?(u=f===0?_e:f<0?ve:ge,n=f!=this.pX,l=Math.abs(e.deltaX)):(u=M===0?_e:M<0?ye:Te,n=M!=this.pY,l=Math.abs(e.deltaY))),e.direction=u,n&&l>r.threshold&&u&r.direction},attrTest:function(e){return j.prototype.attrTest.call(this,e)&&(this.state&x||!(this.state&x)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var r=At(e.direction);r&&(e.additionalEvent=this.options.event+r),this._super.emit.call(this,e)}});function Ze(){j.apply(this,arguments)}F(Ze,j,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&x)},emit:function(e){if(e.scale!==1){var r=e.scale<1?"in":"out";e.additionalEvent=this.options.event+r}this._super.emit.call(this,e)}});function Je(){ee.apply(this,arguments),this._timer=null,this._input=null}F(Je,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mt]},process:function(e){var r=this.options,n=e.pointers.length===r.pointers,l=e.distance<r.threshold,u=e.deltaTime>r.time;if(this._input=e,!l||!n||e.eventType&(D|B)&&!u)this.reset();else if(e.eventType&X)this.reset(),this._timer=P(function(){this.state=K,this.tryEmit()},r.time,this);else if(e.eventType&D)return K;return J},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===K&&(e&&e.eventType&D?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=A(),this.manager.emit(this.options.event,this._input)))}});function Qe(){j.apply(this,arguments)}F(Qe,j,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[oe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&x)}});function Ke(){j.apply(this,arguments)}F(Ke,j,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|ae,pointers:1},getTouchAction:function(){return Re.prototype.getTouchAction.call(this)},attrTest:function(e){var r=this.options.direction,n;return r&(Z|ae)?n=e.overallVelocity:r&Z?n=e.overallVelocityX:r&ae&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&v(n)>this.options.velocity&&e.eventType&D},emit:function(e){var r=At(e.offsetDirection);r&&this.manager.emit(this.options.event+r,e),this.manager.emit(this.options.event,e)}});function De(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}F(De,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xe]},process:function(e){var r=this.options,n=e.pointers.length===r.pointers,l=e.distance<r.threshold,u=e.deltaTime<r.time;if(this.reset(),e.eventType&X&&this.count===0)return this.failTimeout();if(l&&u&&n){if(e.eventType!=D)return this.failTimeout();var f=this.pTime?e.timeStamp-this.pTime<r.interval:!0,M=!this.pCenter||we(this.pCenter,e.center)<r.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!M||!f?this.count=1:this.count+=1,this._input=e;var H=this.count%r.taps;if(H===0)return this.hasRequireFailures()?(this._timer=P(function(){this.state=K,this.tryEmit()},r.interval,this),x):K}return J},failTimeout:function(){return this._timer=P(function(){this.state=J},this.options.interval,this),J},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==K&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function te(e,r){return r=r||{},r.recognizers=N(r.recognizers,te.defaults.preset),new et(e,r)}te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Qe,{enable:!1}],[Ze,{enable:!1},["rotate"]],[Ke,{direction:Z}],[Re,{direction:Z},["swipe"]],[De],[De,{event:"doubletap",taps:2},["tap"]],[Je]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Cr=1,St=2;function et(e,r){this.options=g({},te.defaults,r||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=Kt(this),this.touchAction=new je(this,this.options.touchAction),Nt(this,!0),_(this.options.recognizers,function(n){var l=this.add(new n[0](n[1]));n[2]&&l.recognizeWith(n[2]),n[3]&&l.requireFailure(n[3])},this)}et.prototype={set:function(e){return g(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?St:Cr},recognize:function(e){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(e);var n,l=this.recognizers,u=r.curRecognizer;(!u||u&&u.state&K)&&(u=r.curRecognizer=null);for(var f=0;f<l.length;)n=l[f],r.stopped!==St&&(!u||n==u||n.canRecognizeWith(u))?n.recognize(e):n.reset(),!u&&n.state&(x|ce|re)&&(u=r.curRecognizer=n),f++}},get:function(e){if(e instanceof ee)return e;for(var r=this.recognizers,n=0;n<r.length;n++)if(r[n].options.event==e)return r[n];return null},add:function(e){if(I(e,"add",this))return this;var r=this.get(e.options.event);return r&&this.remove(r),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(I(e,"remove",this))return this;if(e=this.get(e),e){var r=this.recognizers,n=$(r,e);n!==-1&&(r.splice(n,1),this.touchAction.update())}return this},on:function(e,r){if(e!==s&&r!==s){var n=this.handlers;return _(k(e),function(l){n[l]=n[l]||[],n[l].push(r)}),this}},off:function(e,r){if(e!==s){var n=this.handlers;return _(k(e),function(l){r?n[l]&&n[l].splice($(n[l],r),1):delete n[l]}),this}},emit:function(e,r){this.options.domEvents&&Pr(e,r);var n=this.handlers[e]&&this.handlers[e].slice();if(!(!n||!n.length)){r.type=e,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var l=0;l<n.length;)n[l](r),l++}},destroy:function(){this.element&&Nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Nt(e,r){var n=e.element;if(!!n.style){var l;_(e.options.cssProps,function(u,f){l=G(n.style,f),r?(e.oldCssProps[l]=n.style[l],n.style[l]=u):n.style[l]=e.oldCssProps[l]||""}),r||(e.oldCssProps={})}}function Pr(e,r){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=r,r.target.dispatchEvent(n)}g(te,{INPUT_START:X,INPUT_MOVE:se,INPUT_END:D,INPUT_CANCEL:B,STATE_POSSIBLE:ke,STATE_BEGAN:x,STATE_CHANGED:ce,STATE_ENDED:re,STATE_RECOGNIZED:K,STATE_CANCELLED:Ie,STATE_FAILED:J,DIRECTION_NONE:_e,DIRECTION_LEFT:ve,DIRECTION_RIGHT:ge,DIRECTION_UP:ye,DIRECTION_DOWN:Te,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:ae,DIRECTION_ALL:ft,Manager:et,Input:V,TouchAction:je,TouchInput:Se,MouseInput:Ae,PointerEventInput:ze,TouchMouseInput:Ve,SingleTouchInput:Et,Recognizer:ee,AttrRecognizer:j,Tap:De,Pan:Re,Swipe:Ke,Pinch:Ze,Rotate:Qe,Press:Je,on:b,off:T,each:_,merge:w,extend:L,assign:g,inherit:F,bindFn:he,prefixed:G});var _r=typeof i<"u"?i:typeof self<"u"?self:{};_r.Hammer=te,typeof s=="function"&&s.amd?s(function(){return te}):t.exports?t.exports=te:i[o]=te})(window,document,"Hammer")})(Ft);const Ot=Ft.exports;var ot=(t,i,a)=>{if(!i.has(t))throw TypeError("Cannot "+a)},fe=(t,i,a)=>(ot(t,i,"read from private field"),a?a.call(t):i.get(t)),le=(t,i,a)=>{if(i.has(t))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(t):i.set(t,a)},de=(t,i,a,o)=>(ot(t,i,"write to private field"),o?o.call(t,a):i.set(t,a),a),He=(t,i,a)=>(ot(t,i,"access private method"),a),ie,pe,We,rt,Ut,nt,Ht,it,Wt,st,Yt;class Ar{constructor(i={}){le(this,rt),le(this,nt),le(this,it),le(this,st),le(this,ie,void 0),le(this,pe,-1),le(this,We,50);const{decimalPlaces:a=-1,defaultQuantity:o=50}=i;this.setDecimalPlaces(a),this.setDefaultQuantity(o)}setDecimalPlaces(i=-1){if(typeof i!="number"||i%1!==0||i<-1)throw new TypeError("The argument 'decimalPlaces' must be a positive integer or -1.");de(this,pe,i)}setDefaultQuantity(i){if(typeof i!="number"||i%1!==0||i<=0)throw new TypeError("The argument 'defaultQuantity' must be a positive integer.");de(this,We,i)}setPath(i,...a){switch(i){case"LINE":de(this,ie,He(this,rt,Ut).call(this,a[0],a[1]));break;case"TWO_ORDER_BEZIER":de(this,ie,He(this,nt,Ht).call(this,a[0],a[1],a[2]));break;case"THREE_ORDER_BEZIER":de(this,ie,He(this,it,Wt).call(this,a[0],a[1],a[2],a[3]));break;case"ARC":de(this,ie,He(this,st,Yt).call(this,a[0],a[1],a[2],a[3],a[4],a[5]));break;default:throw new TypeError(`The argument 'type' expact 'LINE', 'TWO_ORDER_BEZIER', 'THREE_ORDER_BEZIER', or 'ARC', but got '${i}'`)}return this}getPoint(i=0){if(!fe(this,ie))throw new Error("Please set path first.");if(i>1||i<0)throw new RangeError("The argument 't' must be between 0 and 1.");let{x:a,y:o}=fe(this,ie).call(this,i);return fe(this,pe)>-1&&(a=Number(a.toFixed(fe(this,pe))),o=Number(o.toFixed(fe(this,pe)))),{x:a,y:o}}getPoints(i){if(i||(i=fe(this,We)),typeof i!="number"||i%1!==0||i<=0)throw new TypeError("The argument 'quantity' must be a positive integer.");const a=[];for(let o=0;o<i;o++)a.push(this.getPoint(o/(i-1)));return a}}ie=new WeakMap,pe=new WeakMap,We=new WeakMap,rt=new WeakSet,Ut=function(t,i){const{x:a,y:o}=t,{x:s,y:h}=i;return m=>({x:a+(s-a)*m,y:o+(h-o)*m})},nt=new WeakSet,Ht=function(t,i,a){const{x:o,y:s}=t,{x:h,y:m}=i,{x:d,y:p}=a;return v=>({x:Math.pow(1-v,2)*o+2*v*(1-v)*h+Math.pow(v,2)*d,y:Math.pow(1-v,2)*s+2*v*(1-v)*m+Math.pow(v,2)*p})},it=new WeakSet,Wt=function(t,i,a,o){const{x:s,y:h}=t,{x:m,y:d}=i,{x:p,y:v}=a,{x:A,y:P}=o;return I=>({x:s*Math.pow(1-I,3)+3*m*I*Math.pow(1-I,2)+3*p*Math.pow(I,2)*(1-I)+A*Math.pow(I,3),y:h*Math.pow(1-I,3)+3*d*I*Math.pow(1-I,2)+3*v*Math.pow(I,2)*(1-I)+P*Math.pow(I,3)})},st=new WeakSet,Yt=function(t,i,a,o,s,h=!1){const m=2*Math.PI;if(h&&([o,s]=[s,o]),s-o>=m)s=o+m;else if(o!==s)if((o-s)%m===0)s=o;else for(o=o%m;s>o+m;)s-=m;const d=o>s?m-o+s:s-o;return p=>{h&&(p=1-p);const v=d*p+o;return{x:t+Math.cos(v)*a,y:i+Math.sin(v)*a}}};var Ye=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT",t))(Ye||{});function Sr(t,i,a,o){const s=a-t,h=o-i;return Math.atan2(h,s)}function Rt(t,i,a,o,s=[255,255,255],h=[255,245,196]){t.beginPath(),t.save(),t.translate(i,a);const[m,d,p]=s,v=t.createRadialGradient(0,0,o/2,0,0,o);v.addColorStop(0,`rgba(${m}, ${d}, ${p}, 0.5)`),v.addColorStop(1,`rgba(${m}, ${d}, ${p}, 0.1)`),t.arc(0,0,o,0,Math.PI*2),t.fillStyle=v,t.fill(),t.save(),t.globalCompositeOperation="destination-out",t.beginPath(),t.ellipse(o*.05,o*.05,o*.82,o*.95,Math.PI/4,0,Math.PI*2),t.fillStyle="rgba(0, 0, 0, 1)",t.fill(),t.restore(),t.save(),t.beginPath(),t.arc(0,0,o,0,Math.PI*2),t.shadowColor=`rgba(${h[0]}, ${h[1]}, ${h[2]}, 1)`,t.shadowBlur=20,t.shadowOffsetX=o/8,t.shadowOffsetY=o/8,t.strokeStyle=`rgba(${m}, ${d}, ${p}, 0.5)`,t.lineWidth=2,t.stroke(),t.restore(),t.beginPath(),t.ellipse(-o*.9*Math.cos(Math.PI/3),-o*.9*Math.sin(Math.PI/3),o*.1,o*.05,Math.PI*.8,0,Math.PI*2),t.fillStyle=`rgba(${m}, ${d}, ${p}, 0.75)`,t.ellipse(-o*.9*Math.cos(Math.PI*1.95),-o*.9*Math.sin(Math.PI*1.95),o*.06,o*.03,Math.PI*.6,0,Math.PI*2),t.fillStyle=`rgba(${m}, ${d}, ${p}, 0.5)`,t.fill(),t.restore()}function Nr(t,i,a,o,s,h=[255,255,255]){switch(t.save(),t.beginPath(),s){case 1:t.translate(i,a-o*.9),t.rotate(Math.PI/2);break;case 4:t.translate(i+o*.9,a),t.rotate(Math.PI);break;case 2:t.translate(i,a+o*.9),t.rotate(Math.PI*1.5);break;case 3:default:t.translate(i-o*.9,a);break}t.lineCap="round",t.lineJoin="round",t.moveTo(0,0),t.lineTo(o*.3*Math.cos(Math.PI/6),o*.3*Math.sin(Math.PI/6)),t.lineTo(o*.2,0),t.scale(1,-1),t.moveTo(0,0),t.lineTo(o*.3*Math.cos(Math.PI/6),o*.3*Math.sin(Math.PI/6)),t.lineTo(o*.2,0),t.lineWidth=2;const m=t.createLinearGradient(0,0,o*.3,0),[d,p,v]=h;m.addColorStop(0,`rgba(${d}, ${p}, ${v}, 0.8)`),m.addColorStop(1,`rgba(${d}, ${p}, ${v}, 0.3)`),t.fillStyle=m,t.strokeStyle=m,t.stroke(),t.fill(),t.restore()}function kr(t,i,a){t.save(),t.translate(i.baseCenter.x,i.baseCenter.y);const o=i.baseRadius,s={x:Math.cos(a-Math.PI/8)*o,y:Math.sin(a-Math.PI/8)*o},h={x:Math.cos(a)*(o+4),y:Math.sin(a)*(o+4)},m={x:Math.cos(a)*(o+16),y:Math.sin(a)*(o+16)},[d,p,v]=i.edgeLightColor;t.beginPath(),t.shadowColor=`rgba(${d}, ${p}, ${v}, 1)`,t.shadowBlur=10,t.arc(0,0,o,a-Math.PI/8,a+Math.PI/8),t.quadraticCurveTo(h.x,h.y,m.x,m.y),t.quadraticCurveTo(h.x,h.y,s.x,s.y),t.fillStyle=`rgba(${d}, ${p}, ${v}, 1)`,t.fill();const A=a-Math.PI/4,P=a+Math.PI/4,I=new Ar;let _=Math.floor(i.baseRadius*.8);_%2===0&&(_+=1);const c=I.setPath("ARC",0,0,o,A,P).getPoints(_);for(let g=0;g<_/2;g++){const L=c[g],w=c[c.length-1-g];t.save(),t.shadowColor=`rgba(${d}, ${p}, ${v}, 1)`,t.shadowBlur=10,t.fillStyle=`rgba(${d}, ${p}, ${v}, 0.5)`,t.beginPath(),t.arc(L.x,L.y,g*.12,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(w.x,w.y,g*.12,0,2*Math.PI),t.fill(),t.restore()}t.restore()}function Ce(t,i){t.clearRect(0,0,t.canvas.width,t.canvas.height),Rt(t,i.baseCenter.x,i.baseCenter.y,i.baseRadius,i.baseColor),Rt(t,i.handleCenter.x,i.handleCenter.y,i.handleRadius,i.handleColor),[1,4,2,3].forEach(o=>{const s=i.currentDirection===o?i.handleColor:i.baseColor;Nr(t,i.baseCenter.x,i.baseCenter.y,i.baseRadius,o,s)})}const Or=t=>{const i=Object.assign({width:400,height:300,baseRadius:80,handleRadius:40,baseColor:[255,255,255],handleColor:[245,255,196],edgeLightColor:[245,255,196],onDirectionChange:()=>{}},t),a=at(i.width,i.height),o=a.getContext("2d");let s=0;const h={width:a.width,height:a.height,get currentDirection(){return s},set currentDirection(P){s=P,i.onDirectionChange(P)},isDragging:!1,baseCenter:{x:i.width/2,y:i.height/2},handleCenter:{x:i.width/2,y:i.height/2},baseRadius:i.baseRadius,handleRadius:i.handleRadius,baseColor:i.baseColor,handleColor:i.handleColor,edgeLightColor:i.edgeLightColor};function m(P,I){const _=P-h.baseCenter.x,c=I-h.baseCenter.y,g=Math.sqrt(_*_+c*c);g>h.baseRadius-h.handleRadius?(h.handleCenter.x=h.baseCenter.x+_/g*(h.baseRadius-h.handleRadius),h.handleCenter.y=h.baseCenter.y+c/g*(h.baseRadius-h.handleRadius)):(h.handleCenter.x=P,h.handleCenter.y=I)}const d=P=>{h.currentDirection=P,Ce(o,h)},p=new Ot(a);p.get("pan").set({direction:Ot.DIRECTION_ALL}),p.on("panstart",P=>{const I=a.getBoundingClientRect(),_=P.center.x-I.left,c=P.center.y-I.top,g=_-h.handleCenter.x,L=c-h.handleCenter.y;Math.sqrt(g*g+L*L)<=h.handleRadius&&(h.isDragging=!0,m(_,c),Ce(o,h))}),p.on("panmove",P=>{if(h.isDragging){const I=a.getBoundingClientRect(),_=P.center.x-I.left,c=P.center.y-I.top;m(_,c),Ce(o,h);const g=Sr(0,0,_-h.baseCenter.x,c-h.baseCenter.y);kr(o,h,g),g>=-Math.PI/4&&g<Math.PI/4?h.currentDirection=4:g>=Math.PI/4&&g<Math.PI*3/4?h.currentDirection=2:g>=Math.PI*3/4&&g<=Math.PI||g>=-Math.PI&&g<=-Math.PI*3/4?h.currentDirection=3:g>=-Math.PI*3/4&&g<-Math.PI/4&&(h.currentDirection=1)}}),p.on("panend",()=>{h.isDragging&&(Object.assign(h,{isDragging:!1,handleCenter:{x:h.baseCenter.x,y:h.baseCenter.y},currentDirection:0}),Ce(o,h),console.log("Rocker Released"))});const v=P=>{switch(P.key){case"ArrowLeft":d(3);break;case"ArrowRight":d(4);break;case"ArrowUp":d(1);break;case"ArrowDown":d(2);break}};return document.addEventListener("keydown",v),Ce(o,h),{rocker:a,destroyRocker:()=>{document.removeEventListener("keydown",v),p.destroy(),a.remove()}}},Rr="GAME_OVER",Dr="DIRECTION_CHANGE",qe="STATUS_CHANGE",Xt="LENGTH_CHANGE",qt="DRAW",lt="EXIT",$t=(t,i)=>{const a=typeof t=="string"?document.querySelector(t):t;if(!a||!("innerHTML"in a))throw new TypeError(`'el' expect a selector or a HTMLElement, but got a '${t}'`);const o=document.createElement("div");o.classList.add("home"),o.innerHTML=`
    <div class="background"></div>
    <div class="flowing-gradient"></div>
    <div class="particles" id="J_particles"></div>
    <div class="content">
      <h1 class="title">\u8D2A\u5403\u86C7</h1>
      <button class="btn btn-start" id="J_btn_start">\u5F00\u59CB\u6E38\u620F</button>
      <button class="btn btn-back" id="J_btn_back">\u8FD4\u56DE\u9996\u9875</button>
    </div>
  `;const s=()=>{i()},h=()=>{window.location.href="/mini-games"};return{mount:()=>{a.appendChild(o);for(let p=0;p<100;p++){const v=document.createElement("span");v.style.left=`${Math.random()*100}vw`,v.style.top=`${Math.random()*100}vh`,v.style.animationDelay=`${Math.random()*5}s`,document.querySelector("#J_particles").appendChild(v)}document.querySelector("#J_btn_start").addEventListener("click",s),document.querySelector("#J_btn_back").addEventListener("click",h)},unmount:()=>{document.querySelector("#J_btn_start").removeEventListener("click",s),document.querySelector("#J_btn_back").removeEventListener("click",h),a.removeChild(o)}}},Lr=t=>{const{width:i,height:a}=t.mainAreaSize,o=at(i,a),s=o.getContext("2d"),h="#000",m="#fff",d="#f40",p="#00ff88",v=t.rows,A=t.columns,P={top:(a-v*R)/2,right:(i-A*R)/2,bottom:(a-v*R)/2,left:(i-A*R)/2},I=()=>{for(let N=0;N<v;N++)for(let b=0;b<A;b++)s.strokeStyle="#e1e1e1",s.strokeRect(b*R,N*R,R,R)},_=N=>{const b=N[0],T=N.slice(1,-1),y=N[N.length-1];c(b,Fe(b,T[0])),T.forEach((C,k)=>{g(C,Fe(k===0?b:T[k-1],C),Fe(k===T.length-1?y:T[k+1],C))}),L(y,Fe(y,T.at(-1)))},c=(N,b)=>{s.save();const T=R,y=R;switch(s.translate(N.x*T+T/2,N.y*y+y/2),b){case E.top:s.rotate(-Math.PI/2);break;case E.right:break;case E.bottom:s.rotate(Math.PI/2);break;case E.left:s.rotate(Math.PI);break}s.beginPath(),s.moveTo(-T/2,-y/4),s.bezierCurveTo(T/2,-y*.8,T/2,y*.8,-T/2,y/4),s.fillStyle=h,s.fill(),s.beginPath(),s.arc(-T*.1,-y*.2,2,0,Math.PI*2),s.fillStyle=m,s.fill(),s.beginPath(),s.arc(-T*.1,y*.2,2,0,Math.PI*2),s.fillStyle=m,s.fill(),s.beginPath(),s.moveTo(T*.1,0),s.bezierCurveTo(T*.25,y*.2,T*.25,-y*.2,T*.5,0),s.strokeStyle=d,s.stroke(),s.restore()},g=(N,b,T)=>{s.save();const y=R,C=R;s.translate(N.x*y+y/2,N.y*C+C/2),s.beginPath();let k={x:0,y:0},$=null,W={x:0,y:0},U={x:0,y:0},G=null,z={x:0,y:0};switch(b){case E.top:k={x:-y/4,y:-C/2},U={x:y/4,y:-C/2},T===E.right&&(k={x:y/4,y:-C/2},U={x:-y/4,y:-C/2});break;case E.right:k={x:y/2,y:-C/4},U={x:y/2,y:C/4},T===E.top&&(k={x:y/2,y:C/4},U={x:y/2,y:-C/4});break;case E.bottom:k={x:-y/4,y:C/2},U={x:y/4,y:C/2},T===E.left&&(k={x:y/4,y:C/2},U={x:-y/4,y:C/2});break;case E.left:k={x:-y/2,y:-C/4},U={x:-y/2,y:C/4},T===E.bottom&&(k={x:-y/2,y:C/4},U={x:-y/2,y:-C/4});break}switch(T){case E.top:W={x:-y/4,y:-C/2},$=ne(b,T,k,W),z={x:y/4,y:-C/2},G=ne(b,T,U,z);break;case E.right:W={x:y/2,y:-C/4},$=ne(b,T,k,W),z={x:y/2,y:C/4},G=ne(b,T,U,z);break;case E.bottom:W={x:-y/4,y:C/2},$=ne(b,T,k,W),z={x:y/4,y:C/2},G=ne(b,T,U,z);break;case E.left:W={x:-y/2,y:-C/4},$=ne(b,T,k,W),z={x:-y/2,y:C/4},G=ne(b,T,U,z);break}s.beginPath(),s.lineWidth=1,s.moveTo(k.x,k.y),$?s.quadraticCurveTo($.x,$.y,W.x,W.y):s.lineTo(W.x,W.y),s.lineTo(z.x,z.y),G?s.quadraticCurveTo(G.x,G.y,U.x,U.y):s.lineTo(U.x,U.y),s.fillStyle=h,s.fill(),s.restore()},L=(N,b)=>{s.save();const T=R,y=R;switch(s.translate(N.x*T+T/2,N.y*y+y/2),b){case E.top:s.scale(Math.random()>.5?1:-1,-1);break;case E.right:s.rotate(Math.PI/2),s.scale(Math.random()>.5?1:-1,-1);break;case E.bottom:s.scale(Math.random()>.5?1:-1,1);break;case E.left:s.rotate(Math.PI/2),s.scale(Math.random()>.5?1:-1,1);break}s.beginPath(),s.fillStyle=h,s.moveTo(-T/4,-y/2),s.quadraticCurveTo(-T/2,y/2,T/2,y/2),s.quadraticCurveTo(-T/4,y/4,T/4,-y/2),s.fill(),s.restore()},w=N=>{s.save(),s.translate(N.x*R+R/2,N.y*R+R/2),s.fillStyle=p,s.beginPath(),s.shadowBlur=10,s.shadowColor=p,s.arc(0,0,R/4,0,Math.PI*2),s.fill(),s.restore()},F=()=>{s.clearRect(0,0,i,a),s.save(),s.translate(P.left,P.top),I(),_(t.snake),w(t.food),s.restore()};return{mount:N=>{N.appendChild(o),t.emitter.on(qt,F)},unmount:()=>{o.remove()},draw:F}},Fr=t=>{const i=t.mainAreaSize.width*.5,a=t.footerAreaSize.height,o=at(i,a),s=o.getContext("2d"),h=[{name:"ctrl",text:"\u6682\u505C\u6E38\u620F",cx:i/4,cy:a/4,width:Math.max(80,i/6),height:a/4,status:"default"},{name:"esc",text:"\u4E0D\u73A9\u4E86",cx:i/4,cy:a*3/4,width:Math.max(80,i/6),height:a/4,status:"default"}],m=c=>{s.save(),s.beginPath(),s.translate(c.cx,c.cy),s.roundRect(-c.width/2,-c.height/2,c.width,c.height,a/16),s.strokeStyle=c.status==="hover"?"transparent":"#333",s.stroke();const g=s.createLinearGradient(0,0,c.width,c.height);g.addColorStop(0,"#00ff88"),g.addColorStop(1,"#0088ff"),s.fillStyle=c.status==="hover"?g:"transparent",s.fill(),s.restore(),Pe(s,c.name==="ctrl"?t.status===O.paused?"\u7EE7\u7EED\u6E38\u620F":t.status===O.finished?"\u518D\u6765\u4E00\u5C40":"\u6682\u505C\u6E38\u620F":c.text,{x:c.cx,y:c.cy,fontSize:c.height*.4,color:c.status==="hover"?"#fff":"#333",textAlign:"center",textBaseline:"middle"})},d=()=>{h.forEach(c=>{m(c)})},p=(c,g)=>{Pe(s,"\u72B6\u6001\uFF1A",{x:i*3/4,y:a/4,fontSize:a/10,color:"#333",textAlign:"right",textBaseline:"middle"}),Pe(s,c===O.paused?"\u6682\u505C\u4E2D":c===O.finished?"\u5DF2\u7ED3\u675F":"\u6E38\u620F\u4E2D",{x:i*3/4,y:a/4,fontSize:Math.min(14,a/8),color:c===O.paused?"#ff0":c===O.finished?"#00ff88":"#0088ff",textAlign:"left",textBaseline:"middle"}),Pe(s,"\u957F\u5EA6\uFF1A",{x:i*3/4,y:a*3/4,fontSize:a/10,color:"#333",textAlign:"right",textBaseline:"middle"}),Pe(s,`${g}`,{x:i*3/4,y:a*3/4,fontSize:Math.min(14,a/8),color:"#ff0088",textAlign:"left",textBaseline:"middle"})},v=()=>{s.clearRect(0,0,i,a),d(),p(t.status,t.length)},A=c=>{const g=c.clientX-o.offsetLeft,L=c.clientY-o.offsetTop;for(const w of h){if(g>w.cx-w.width/2&&g<w.cx+w.width/2&&L>w.cy-w.height/2&&L<w.cy+w.height/2){w.status="hover",o.style.cursor="pointer";break}w.status="default",o.style.cursor="default"}v()},P=c=>{const g=c.clientX-o.offsetLeft,L=c.clientY-o.offsetTop;for(const w of h)if(g>w.cx-w.width/2&&g<w.cx+w.width/2&&L>w.cy-w.height/2&&L<w.cy+w.height/2){console.log(w.name),w.name==="ctrl"?t.emitter.emit(qe,t.status===O.paused?O.playing:O.paused):w.name==="esc"&&t.emitter.emit(lt);break}},I=c=>{c.appendChild(o),document.addEventListener("mousemove",A),document.addEventListener("click",P)};return t.emitter.on(qe,v),t.emitter.on(Xt,v),{mount:I,unmount:()=>{o.remove()},render:v}},Ur=t=>{const i=t.footerAreaSize.width*.5,a=t.footerAreaSize.height,o=Math.min(i,a),{rocker:s,destroyRocker:h}=Or({width:i,height:a,baseRadius:o*.4,handleRadius:o*.2,baseColor:[255,255,255],handleColor:[0,255,136],edgeLightColor:[0,255,136],onDirectionChange:p=>{t.direction=p===Ye.UP?S.up:p===Ye.RIGHT?S.right:p===Ye.DOWN?S.down:S.left}});return{mount:p=>{p.appendChild(s)},unmount:()=>{h()}}};function Pe(t,i,a={}){const{x:o,y:s,fontSize:h,fontFamily:m,fontWeight:d,color:p,textAlign:v,textBaseline:A}=a;t.save(),t.font=`${d!=null?d:"normal"} ${h!=null?h:16}px ${m!=null?m:"Arial"}`,t.fillStyle=p!=null?p:"#000",t.textAlign=v!=null?v:"center",t.textBaseline=A!=null?A:"middle",t.fillText(i,o!=null?o:0,s!=null?s:0),t.restore()}const ht=class{constructor(){Le(this,"_maxListeners");Le(this,"_events");this._events=Object.create(null)}get events(){return this._events}get eventNames(){return Object.keys(this._events)}get maxListener(){return this._maxListeners?this._maxListeners:ht.defaultMaxListener}set maxListener(i){this._maxListeners=i}on(i,a){this._events[i]?this._events[i].length>=this.maxListener?console.warn("\u76D1\u542C\u7684\u4E8B\u4EF6\u4E0D\u80FD\u8D85\u8FC7\u8BBE\u7F6E\u7684\u6700\u5927\u76D1\u542C\u6570\u3002"):this._events[i].push(a):this._events[i]=[a]}once(i,a){const o=(...s)=>{a(...s),this.off(i,o)};o.listen=a,this.on(i,o)}emit(i,...a){this._events[i]&&this._events[i].forEach(o=>{o.call(this,...a)})}off(i,a){this._events[i]&&(this._events[i]=this._events[i].filter(o=>a!==o&&a!==o.listen))}clear(){this._events=Object.create(null)}};let Xe=ht;Le(Xe,"defaultMaxListener",10);var Bt="Expected a function",Dt=0/0,Hr="[object Symbol]",Wr=/^\s+|\s+$/g,Yr=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,qr=/^0o[0-7]+$/i,$r=parseInt,Br=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,Gr=typeof self=="object"&&self&&self.Object===Object&&self,zr=Br||Gr||Function("return this")(),Vr=Object.prototype,xr=Vr.toString,jr=Math.max,Zr=Math.min,tt=function(){return zr.Date.now()};function Jr(t,i,a){var o,s,h,m,d,p,v=0,A=!1,P=!1,I=!0;if(typeof t!="function")throw new TypeError(Bt);i=Lt(i)||0,$e(a)&&(A=!!a.leading,P="maxWait"in a,h=P?jr(Lt(a.maxWait)||0,i):h,I="trailing"in a?!!a.trailing:I);function _(b){var T=o,y=s;return o=s=void 0,v=b,m=t.apply(y,T),m}function c(b){return v=b,d=setTimeout(w,i),A?_(b):m}function g(b){var T=b-p,y=b-v,C=i-T;return P?Zr(C,h-y):C}function L(b){var T=b-p,y=b-v;return p===void 0||T>=i||T<0||P&&y>=h}function w(){var b=tt();if(L(b))return F(b);d=setTimeout(w,g(b))}function F(b){return d=void 0,I&&o?_(b):(o=s=void 0,m)}function he(){d!==void 0&&clearTimeout(d),v=0,o=p=s=d=void 0}function ue(){return d===void 0?m:F(tt())}function N(){var b=tt(),T=L(b);if(o=arguments,s=this,p=b,T){if(d===void 0)return c(p);if(P)return d=setTimeout(w,i),_(p)}return d===void 0&&(d=setTimeout(w,i)),m}return N.cancel=he,N.flush=ue,N}function Qr(t,i,a){var o=!0,s=!0;if(typeof t!="function")throw new TypeError(Bt);return $e(a)&&(o="leading"in a?!!a.leading:o,s="trailing"in a?!!a.trailing:s),Jr(t,i,{leading:o,maxWait:i,trailing:s})}function $e(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function Kr(t){return!!t&&typeof t=="object"}function en(t){return typeof t=="symbol"||Kr(t)&&xr.call(t)==Hr}function Lt(t){if(typeof t=="number")return t;if(en(t))return Dt;if($e(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=$e(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Wr,"");var a=Xr.test(t);return a||qr.test(t)?$r(t.slice(2),a?2:8):Yr.test(t)?Dt:+t}var tn=Qr;const rn=()=>{let t=O.finished,i=S.right;const a=new Xe,{innerWidth:o,innerHeight:s}=window,h={width:o,height:s*.8},m={width:o,height:s*.2};return{columns:Math.floor(h.width/R),rows:Math.floor(h.height/R),mainAreaSize:h,footerAreaSize:m,speed:100,snake:[],food:{x:0,y:0},get status(){return t},set status(d){t=d,a.emit(qe,d)},get direction(){return i},set direction(d){if(t===O.playing){switch(i){case S.up:d!==S.down&&(i=d);break;case S.right:d!==S.left&&(i=d);break;case S.down:d!==S.up&&(i=d);break;case S.left:d!==S.right&&(i=d);break}a.emit(Dr,d)}},get length(){return this.snake.length},startTime:0,emitter:a}},nn=t=>{const{columns:i,rows:a}=t;let o=0;const s=()=>{document.addEventListener("keydown",m,!1),t.emitter.on(qe,()=>{t.status===O.paused||t.status===O.finished?cancelAnimationFrame(o):t.status===O.playing&&p()}),t.snake=[{part:"HEAD",x:Math.floor(i/2),y:Math.floor(a/2)},{part:"BODY",x:Math.floor(i/2)-1,y:Math.floor(a/2)},{part:"TAIL",x:Math.floor(i/2)-2,y:Math.floor(a/2)}],t.food=h(),t.direction=S.right,t.status=O.playing,t.startTime=performance.now()},h=()=>{const A=t.snake,{columns:P,rows:I}=t,_=kt(0,P-1),c=kt(0,I-1);return t.snake.length>=P*I?(t.emitter.emit(Rr,t.snake.length),{x:0,y:0}):A.some(g=>g.x===_&&g.y===c)?h():{x:_,y:c}},m=tn(A=>{switch(A.code){case"ArrowUp":case"KeyW":t.direction!==S.down&&(t.direction=S.up);break;case"ArrowRight":case"KeyD":t.direction!==S.left&&(t.direction=S.right);break;case"ArrowDown":case"KeyS":t.direction!==S.up&&(t.direction=S.down);break;case"ArrowLeft":case"KeyA":t.direction!==S.right&&(t.direction=S.left);break;case"Space":if(t.status===O.finished)return;t.status===O.paused?(t.status=O.playing,p()):t.status=O.paused;break;case"Escape":t.emitter.emit(lt);break}},t.speed),d=()=>{const A=t.food,{columns:P,rows:I}=t,_=t.snake[0],c={..._};switch(t.direction){case S.up:c.y-=1;break;case S.right:c.x+=1;break;case S.down:c.y+=1;break;case S.left:c.x-=1;break}if(c.x<0||c.x>=P||c.y<0||c.y>=I)switch(t.direction){case S.left:c.x=P-1;break;case S.right:c.x=0;break;case S.up:c.y=I-1;break;case S.down:c.y=0;break}if(t.snake.some(g=>g.x===c.x&&g.y===c.y)){t.status=O.finished;return}if(c.x===A.x&&c.y===A.y){_.part="BODY",t.snake.unshift(c),t.food=h(),t.emitter.emit(Xt,t.snake.length);return}_.part="BODY",t.snake.pop(),t.snake.unshift(c),t.snake.at(-1).part="TAIL"},p=()=>{if(t.status!==O.playing){cancelAnimationFrame(o);return}const A=performance.now();A-t.startTime>=t.speed&&(d(),t.startTime=A),t.emitter.emit(qt),o=requestAnimationFrame(p)};return{init:s,destroy:()=>{cancelAnimationFrame(o),document.removeEventListener("keydown",m,!1)}}};const Gt=()=>{const t=rn(),i=t.mainAreaSize,a=t.footerAreaSize,o=document.querySelector("#app"),s=document.createElement("footer");s.style.cssText=`
    display: flex;
    align-items: center;
    width: ${i.width}px;
    height: ${a.height}px;
  `;const h=Lr(t),m=Ur(t),d=Fr(t);h.mount(o),m.mount(s),d.mount(s),o.appendChild(s);const{init:p,destroy:v}=nn(t);p(),t.emitter.on(lt,()=>{v(),m.unmount(),d.unmount(),h.unmount(),o.removeChild(s);const A=$t("#app",()=>{A.unmount(),Gt()});A.mount()})};window.addEventListener("DOMContentLoaded",()=>{const t=$t("#app",()=>{t.unmount(),Gt()});t.mount()});
